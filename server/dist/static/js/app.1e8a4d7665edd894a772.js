webpackJsonp([1],{"9UPO":function(e,t){},DJNL:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("7+uW"),i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-container",[a("router-view",{attrs:{name:"Nav"}}),e._v(" "),a("el-container",[a("el-header",{staticStyle:{"text-align":"left","background-color":"#2396F0",color:"#fff"}},[a("span",{on:{click:function(t){e.getdataform()}}},[e._v(" 大迈")])]),e._v(" "),a("router-view",{attrs:{name:"content"}})],1)],1)],1)},staticRenderFns:[]};var l={name:"Appweb",components:{index:a("VU/8")({data:function(){return{public:[]}},methods:{getdataform:function(){}}},i,!1,function(e){a("DJNL")},"data-v-25e9aa64",null).exports},methods:{fatherMethod:function(){}}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("index")],1)},staticRenderFns:[]};var n=a("VU/8")(l,r,!1,function(e){a("bCTA")},null,null).exports,s=a("/ocq"),c={data:function(){return{contentsint:"",contentsintp:"",Customerlist:[],tableData:[],optionsproject:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{projectName:"",projectContent:"",CustomerName:"",ContractAmount:"",ContractDate:"",ExpenditureBudget:""},formexpenditureData:[],formReceivables:[],rules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],ContractAmount:[{required:!0,message:"请输入合同金额"},{type:"number",message:"金额必需为数额"}],ContractDate:[{required:!0,message:"请选择签约日期",trigger:"blur"}]}}},props:{map:{}},watch:{},mounted:function(){this.getdata(),this.getFormData("Customerlist")},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.postData()})},resetForm:function(e){this.$refs[e].resetFields()},onSubmit:function(){console.log(this.form)},postData:function(){var e=this;return this.jsondata.postData("projectList",this.form).then(function(t){"OK"===t.statusText&&(e.getdata(),e.dialogFormVisible=!1)}).catch(function(e){console.log(e)}),!1},getdata:function(){var e=this;return this.jsondata.getData("expenditureData").then(function(t){e.formexpenditureData=t.data}).catch(function(e){console.log(e)}),this.jsondata.getDataClass("projectList","0","complete").then(function(t){e.tableData=t.data;for(var a=0;a<e.tableData.length;a++)e.tableData[a].ContractDate=t.data[0].ContractDate.substr(0,10),e.tableData[a].ContractAmount=e.jsondata.currency(Number(e.tableData[a].ContractAmount),"￥",2),e.tableData[a].ExpenditureBudget=e.jsondata.currency(e.tableData[a].ExpenditureBudget,"￥",2),e.tableData[a].Receivables=0;e.getdataReceivables()}).catch(function(e){console.log(e)}),!1},handle:function(e,t,a){this.$router.push("/ProjectDetails/"+e.id),console.log(e.id)},getFormData:function(e){var t=this;this.jsondata.getData(e).then(function(e){t.optionsproject=e.data}).catch(function(e){console.log(e)})},getdataReceivables:function(){var e=this;return this.jsondata.getData("Receivables").then(function(t){e.jsondata.getData("RevenueContract").then(function(a){e.jsondata.getData("expenditure").then(function(o){for(var i=0;i<e.tableData.length;i++){e.tableData[i].Receivables=0,e.tableData[i].expenditure=0;for(var l=0;l<a.data.length;l++)for(var r=0;r<t.data.length;r++)a.data[l].id===t.data[r].projectId&&Number(a.data[l].projectId)===Number(e.tableData[i].id)&&(e.tableData[i].Receivables+=Number(t.data[r].Receivables));for(var n=0;n<o.data.length;n++){o.data[n].expenditure=0;for(var s=0;s<e.formexpenditureData.length;s++)o.data[n].id===e.formexpenditureData[s].projectId&&Number(o.data[n].projectId)===Number(e.tableData[i].id)&&(o.data[n].expenditure+=Number(e.formexpenditureData[s].Receivables));"不分期"===o.data[n].Receivableslist&&Number(o.data[n].projectId)===Number(e.tableData[i].id)?e.tableData[i].expenditure+=Number(o.data[n].Receivables):e.tableData[i].expenditure+=o.data[n].expenditure}e.tableData[i].expenditure=e.jsondata.currency(e.tableData[i].expenditure,"￥",2),e.tableData[i].Receivables=e.jsondata.currency(e.tableData[i].Receivables,"￥",2)}}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),!1}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",[e._v("\n    进行中项目\n    "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加项目")])],1),e._v(" "),a("el-dialog",{attrs:{title:"添加项目",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"签约日期",prop:"ContractDate"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.ContractDate,callback:function(t){e.$set(e.form,"ContractDate",t)},expression:"form.ContractDate"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("el-input",{model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"甲方客户",prop:"CustomerName"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{filterable:"",placeholder:"甲方客户"},model:{value:e.form.CustomerName,callback:function(t){e.$set(e.form,"CustomerName",t)},expression:"form.CustomerName"}},e._l(e.optionsproject,function(e){return a("el-option",{key:e.CustomerName,attrs:{label:e.CustomerName,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"项目金额",prop:"ContractAmount"}},[a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.form.ContractAmount,callback:function(t){e.$set(e.form,"ContractAmount",e._n(t))},expression:"form.ContractAmount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预算支出",prop:"ExpenditureBudget"}},[a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.form.ExpenditureBudget,callback:function(t){e.$set(e.form,"ExpenditureBudget",e._n(t))},expression:"form.ExpenditureBudget"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目说明",prop:"projectContent"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.projectContent,callback:function(t){e.$set(e.form,"projectContent",t)},expression:"form.projectContent"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","summary-method":e.jsondata.getSummaries,"show-summary":""},on:{"row-click":e.handle}},[a("el-table-column",{attrs:{prop:"ContractDate",label:"签约时间",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ContractAmount",label:"项目金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"已收金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ExpenditureBudget",label:"应付金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"expenditure",label:"已付金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectContent",label:"项目说明",sortable:""}})],1)],1)},staticRenderFns:[]},m=a("VU/8")(c,u,!1,null,null,null).exports,d={data:function(){return{openeds:["1","2"],isCollapse:!1}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":"1-4-1","background-color":"#545c64","text-color":"#fff",collapse:e.isCollapse,"default-openeds":e.openeds},on:{open:e.handleOpen,close:e.handleClose}},[a("el-submenu",{attrs:{index:"1",collapse:!0}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("项目管理")])]),e._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/index"}},[a("i",{staticClass:"el-icon-menu"}),e._v("进行中项目\n      ")]),e._v(" "),a("el-menu-item",{attrs:{index:"/Customerlist"}},[a("i",{staticClass:"el-icon-user-solid"}),e._v("客户管理\n      ")]),e._v(" "),a("el-menu-item",{attrs:{index:"/SupplierList"}},[a("i",{staticClass:"el-icon-s-shop"}),e._v("供应商管理\n      ")])],1)],2),e._v(" "),a("el-submenu",{attrs:{index:"2",collapse:!0}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("帐目报表")])]),e._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/Receivableslist"}},[a("i",{staticClass:"el-icon-menu"}),e._v("项目收入报表\n      ")]),e._v(" "),a("el-menu-item",{attrs:{index:"/expenditurelist"}},[a("i",{staticClass:"el-icon-s-flag"}),e._v("项目支出报表\n      ")]),e._v(" "),a("el-menu-item",{attrs:{index:"/profitlist"}},[a("i",{staticClass:"el-icon-s-order"}),e._v("项目利润报表\n      ")]),e._v(" "),a("el-menu-item",{attrs:{index:"/SupplierData"}},[a("i",{staticClass:"el-icon-s-check"}),e._v("供应商应付表\n      ")]),e._v(" "),a("el-menu-item",{attrs:{index:"/stafflist"}},[a("i",{staticClass:"el-icon-s-check"}),e._v("外包应付表\n      ")])],1)],2),e._v(" "),a("el-menu-item",{attrs:{index:"3"}},[a("i",{staticClass:"el-icon-setting"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("暂无内容")])])],1)},staticRenderFns:[]},f=a("VU/8")(d,p,!1,null,null,null).exports,b=a("RRo+"),v=a.n(b),h={data:function(){return{projectdata:"",hetongweishou:"",projectContractcon:[],dataList:[],spanArr:[],projectContract:[],outerVisible:!1,shoukuan:[],gongcheng:[],yewu:[],optionsprojectClass:[],optionsOtherParty:[],zhongshouru:"",weishoukuan:"",projectName:"",rules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],ContractDate:[{required:!0,message:"请选择签约日期",trigger:"blur"}]},Receivables:[],expenditure:[],optionsproject:[],dialogFormVisible:!1,form:{projectName:"无",projectContent:"无",CustomerName:"无",ContractAmount:"",ContractDate:"无",ExpenditureBudget:"无"},contentsinvoice:"",contentsint:"",Receivablesint:"",contentsintp:"",Receivablesintp:"",invoiceint:"",invoicebo:"",invoiceintp:"",tableDatayingjiang:[],ReceivableslistData:[],hegongzhichun:[],tableData:[{pojname:"项目名称",contents:"无"},{pojname:"项目启动时间",contents:"无"},{pojname:"甲方客户",contents:"无"},{pojname:"项目收入",contents:"无"},{pojname:"项目支出",contents:"无"},{pojname:"项目发票",contents:"无"},{pojname:"项目利润",contents:"无"},{pojname:"项目说明",contents:"无"}]}},mounted:function(){this.getdata(),this.getFormData("SupplierList"),this.getFormDataClass("expenditureClass")},methods:{dstaplayb:function(){this.Receivablesintp=0,this.contentsintp=0,this.contentsint=0,this.Receivablesint=0,this.invoiceint=0,this.Receivablesint=0,this.ReceivableslistData=[],this.hegongzhichun=[],this.invoicebo=0},getdata:function(){var e=this;return this.dstaplayb(),this.jsondata.getDataClass("RevenueContract",this.$route.params.id,"projectId").then(function(t){e.projectContract=t.data,e.jsondata.getDataClass("Receivables",e.$route.params.id,"projectlist").then(function(t){for(var a in e.projectContractcon=t.data,e.projectContract){for(var o in e.projectContract[a].projectidlist=[],e.projectContractcon)e.projectContract[a].id==e.projectContractcon[o].projectId&&(e.projectContractcon[o].projectint=a,e.projectContract[a].projectidlist.push(e.projectContractcon[o]));for(var i in e.projectContract[a].projectidlist)if(""!=e.projectContract[a].projectidlist[i].number)for(var l in e.projectContract[a].projectidlist[i].hetongwidthou=Number(e.projectContract[a].projectidlist[i].number),e.projectContract[a].projectidlist)e.projectContract[a].projectidlist[i].Receivableslist==e.projectContract[a].projectidlist[l].Receivableslist&&(e.projectContract[a].projectidlist[i].hetongwidthou-=Number(e.projectContract[a].projectidlist[l].Receivables));for(var r in e.projectContract[a].projectidlist)e.projectContract[a].projectidlist[r].number=e.jsondata.currency(e.projectContract[a].projectidlist[r].number,"￥",2),e.projectContract[a].projectidlist[r].hetongwidthou=e.jsondata.currency(e.projectContract[a].projectidlist[r].hetongwidthou,"￥",2),e.projectContract[a].projectidlist[r].Receivables=e.jsondata.currency(e.projectContract[a].projectidlist[r].Receivables,"￥",2),e.projectContract[a].projectidlist[r].invoice=e.jsondata.currency(e.projectContract[a].projectidlist[r].invoice,"￥",2),""==e.projectContract[a].projectidlist[r].daozhangdate&&(e.projectContract[a].projectidlist[r].daozhangdate+=e.projectContract[a].projectidlist[r].kaifapiaodate);e.projectContract[a].projectidlist=e.projectContract[a].projectidlist.sort(function(e,t){return(e.id+"").localeCompare(t.id+"")}),e.projectContract[a].projectidlist=e.projectContract[a].projectidlist.sort(function(e,t){return(e.Receivableslist+"").localeCompare(t.Receivableslist+"")}),e.dataList.push(e.jsondata.getSpanArr(e.projectContract[a].projectidlist,"Receivableslist"))}}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),this.jsondata.getDataId("projectList",this.$route.params.id).then(function(t){e.form=t.data[0],e.form.ContractDate=t.data[0].ContractDate.substr(0,10),e.jsondata.getData("Customerlist").then(function(t){e.optionsproject=t.data;for(var a=0;a<t.data.length;a++)e.form.CustomerName==t.data[a].id&&(e.form.CustomerNameid=t.data[a].CustomerName,e.tableData[2].contents=e.form.CustomerNameid);e.getdataReceivables()}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),!1},updatpostData:function(){var e=this;return v()(this.form.CustomerNameid)&&(this.form.CustomerName=this.form.CustomerNameid,console.log(this.form.ContractDate)),this.jsondata.updatpostData("projectList",this.form).then(function(t){"OK"===t.data&&(e.dialogAddVisible=!1,e.dialogFormVisible=!1,e.getdata())}).catch(function(e){console.log(e)}),!1},updatpostData_end:function(){var e=this;return this.form.complete=1,v()(this.form.CustomerNameid)&&(this.form.CustomerName=this.form.CustomerNameid),this.jsondata.updatpostData("projectList",this.form).then(function(t){"OK"===t.data&&e.$router.push("/index")}).catch(function(e){console.log(e)}),!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.updatpostData()})},deletepost:function(){var e=this;this.jsondata.deletepost("projectList",this.$route.params.id).then(function(t){"OK"===t.data&&e.$router.push("/index")}).catch(function(e){console.log(e)})},ReceivablesGo:function(){this.$router.push("/RevenueContract/"+this.$route.params.id)},expenditureGo:function(){this.$router.push("/expenditureContract/"+this.$route.params.id)},getdataReceivables:function(){var e=this;return this.tableData[0].contents=this.form.projectName,this.tableData[1].contents=this.form.ContractDate,this.tableData[3].contents="合同金额:"+this.jsondata.currency(this.form.ContractAmount,"￥",2),this.tableData[4].contents="预算支出:"+this.jsondata.currency(this.form.ExpenditureBudget,"￥",2),this.tableData[7].contents=this.form.projectContent,this.jsondata.getDataClass("Receivables",this.$route.params.id,"projectlist").then(function(t){e.projectdata=t.data;for(var a=0;a<t.data.length;a++)for(var o=0;o<e.projectContract.length;o++)e.projectContract[o].id===t.data[a].projectId&&(e.contentsint+=Number(t.data[a].number),e.Receivablesint+=Number(t.data[a].Receivables),e.invoiceint=Number(e.invoiceint)+Number(t.data[a].invoice));e.tableData[3].contents+=" 　　应收金额:"+e.jsondata.currency(e.contentsint,"￥",2),e.tableData[3].contents+=" 　　到帐金额:"+e.jsondata.currency(e.Receivablesint,"￥",2),e.tableData[3].contents+=" 　　未收金额:"+e.jsondata.currency(e.contentsint-e.Receivablesint,"￥",2),e.tableData[5].contents="开出发票:"+e.jsondata.currency(e.invoiceint,"￥",2)+" / "+e.jsondata.currency(e.Receivablesint,"",2),e.shoukuan=t.data;for(var i=0;i<e.shoukuan.length;i++)e.shoukuan[i].Receivablesend=e.jsondata.currency(e.shoukuan[i].number-e.shoukuan[i].Receivables,"￥",2),e.shoukuan[i].number=e.jsondata.currency(e.shoukuan[i].number,"￥",2),e.shoukuan[i].Receivables=e.jsondata.currency(e.shoukuan[i].Receivables,"￥",2),e.shoukuan[i].invoice=e.jsondata.currency(e.shoukuan[i].invoice,"￥",2);e.getdataexpenditure()}).catch(function(e){console.log(e)}),!1},getdataexpenditure:function(){var e=this;return this.jsondata.getDataClass("expenditureData",this.$route.params.id,"projectlist").then(function(t){e.invoiceintp=0,e.contentsintp=0,e.invoicebo=0,0==t.data.length||(e.tableData[6].contents=e.jsondata.currency(e.Receivablesint-e.Receivablesintp,"￥",2)),e.getdatae1()}).catch(function(e){console.log(e)}),!1},getdatae1:function(){var e=this;this.jsondata.getDataClass("expenditure",this.$route.params.id,"projectId").then(function(t){e.hegongzhichun=t.data,e.jsondata.getDataClass("expenditureData",e.$route.params.id,"projectlist").then(function(t){for(var a in e.ReceivableslistData=e.optionsprojectClass,e.ReceivableslistData)for(var o in e.ReceivableslistData[a].hetongzhichundata=[],e.hegongzhichun)if("不计发票"==e.hegongzhichun[o].invoicebo&&(e.invoicebo+=Number(e.hegongzhichun[o].Receivables)),e.ReceivableslistData[a].hetongzhichundata.hetongzhichunlist=[],e.ReceivableslistData[a].id==e.hegongzhichun[o].projectClass){for(var i in e.hegongzhichun[o].Receivables=Number(e.hegongzhichun[o].Receivables),e.hegongzhichun[o].invoice=0,e.hegongzhichun[o].Receivablesend=0,t.data)e.hegongzhichun[o].id==t.data[i].projectId&&("不分期"===e.hegongzhichun[o].Receivableslist||(e.hegongzhichun[o].Receivables+=Number(t.data[i].Receivables)),e.hegongzhichun[o].invoice+=Number(t.data[i].invoice),e.ReceivableslistData[a].hetongzhichundata.hetongzhichunlist.push(t.data[i]),e.Receivablesintp+=Number(t.data[i].Receivables),e.invoiceintp+=Number(t.data[i].invoice),"不计发票"===t.data[i].invoicebo&&(e.invoicebo+=Number(t.data[i].Receivables)));for(var l in e.optionsOtherParty)e.optionsOtherParty[l].id==e.hegongzhichun[o].SupplierName&&(e.hegongzhichun[o].SupplierName=e.optionsOtherParty[l].SupplierName);console.log(e.hegongzhichun[o].Receivableslist),e.contentsintp+=Number(e.hegongzhichun[o].number),e.hegongzhichun[o].Receivablesend=Number(e.hegongzhichun[o].number)-e.hegongzhichun[o].Receivables,e.hegongzhichun[o].Receivables=e.jsondata.currency(e.hegongzhichun[o].Receivables,"￥",2),e.hegongzhichun[o].invoice=e.jsondata.currency(e.hegongzhichun[o].invoice,"￥",2),e.hegongzhichun[o].Receivablesend=e.jsondata.currency(e.hegongzhichun[o].Receivablesend,"￥",2),e.hegongzhichun[o].number=e.jsondata.currency(e.hegongzhichun[o].number,"￥",2),e.ReceivableslistData[a].hetongzhichundata.push(e.hegongzhichun[o])}e.tableData[4].contents+=" 　　应付金额:"+e.jsondata.currency(e.contentsintp,"￥",2),e.tableData[4].contents+=" 　　已付金额:"+e.jsondata.currency(e.Receivablesintp,"￥",2),e.tableData[4].contents+=" 　　未支付金额:"+e.jsondata.currency(e.contentsintp-e.Receivablesintp,"￥",2),e.tableData[5].contents+=" 　　收到发票:"+e.jsondata.currency(e.invoiceintp,"￥",2)+" / "+e.jsondata.currency(e.Receivablesintp,"",2)+" --- 不计发票:"+e.jsondata.currency(e.invoicebo,"￥",2),e.tableData[6].contents=e.jsondata.currency(e.Receivablesint-e.Receivablesintp,"￥",2)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},getFormData:function(e){var t=this;this.jsondata.getData(e).then(function(e){t.optionsOtherParty=e.data}).catch(function(e){console.log(e)})},getFormDataClass:function(e){var t=this;this.jsondata.getData(e).then(function(e){t.optionsprojectClass=e.data}).catch(function(e){console.log(e)})},objectSpanMethod:function(e){var t=e.row,a=(e.column,e.rowIndex),o=e.columnIndex;if(0===o||1===o||2===o||6===o){var i=this.dataList[t.projectint][a];return{rowspan:i,colspan:i>0?1:0}}}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("el-dialog",{attrs:{title:"修改项目",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("el-input",{model:{value:e.form.projectName,callback:function(t){e.$set(e.form,"projectName",t)},expression:"form.projectName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"签约日期",prop:"ContractDate"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.ContractDate,callback:function(t){e.$set(e.form,"ContractDate",t)},expression:"form.ContractDate"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"甲方客户",prop:"CustomerName"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{filterable:"",placeholder:"甲方客户"},model:{value:e.form.CustomerNameid,callback:function(t){e.$set(e.form,"CustomerNameid",t)},expression:"form.CustomerNameid"}},e._l(e.optionsproject,function(e){return a("el-option",{key:e.CustomerName,attrs:{label:e.CustomerName,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"合同金额",prop:"ContractAmount"}},[a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.form.ContractAmount,callback:function(t){e.$set(e.form,"ContractAmount",e._n(t))},expression:"form.ContractAmount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预算支出",prop:"ExpenditureBudget"}},[a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.form.ExpenditureBudget,callback:function(t){e.$set(e.form,"ExpenditureBudget",e._n(t))},expression:"form.ExpenditureBudget"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目说明",prop:"projectContent"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.projectContent,callback:function(t){e.$set(e.form,"projectContent",t)},expression:"form.projectContent"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},on:{click:function(t){e.outerVisible=!0}}},[e._v("删除")])],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"30%",title:"确认删除",visible:e.outerVisible,"append-to-body":""},on:{"update:visible":function(t){e.outerVisible=t}}},[a("el-button",{on:{click:function(t){e.outerVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{on:{click:function(t){e.updatpostData_end()}}},[e._v("删除")])],1)],1),e._v(" "),a("h3",[e._v("\n    项目明细\n    "),a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("修改")]),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"primary"},on:{click:e.ReceivablesGo}},[e._v("项目收款")]),e._v(" "),a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"primary"},on:{click:e.expenditureGo}},[e._v("项目支出")])],1),e._v(" "),a("el-table",{staticClass:"projectdateil",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"pojname",label:"名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contents",label:"内容"}})],1),e._v(" "),a("h3",[e._v("收款")]),e._v(" "),e._l(e.projectContract,function(t){return a("el-row",{key:t.ReceivablesName},[a("h4",[e._v(e._s(t.ReceivablesName)+"  "),a("span",{staticStyle:{float:"right"}},[e._v("签约日期 "+e._s(t.ReceivablesData))])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.projectidlist,"show-summary":"","summary-method":e.jsondata.getSummaries,"span-method":e.objectSpanMethod,border:""}},[a("el-table-column",{attrs:{prop:"Receivableslist",label:"收款分期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReceivablesData",label:"合同收款时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"应收金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"到帐金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"invoice",label:"开出发票"}}),e._v(" "),a("el-table-column",{attrs:{prop:"daozhangdate",label:"日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hetongwidthou",label:"未收金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Remarks",label:"备注"}})],1)],1)}),e._v(" "),a("hr",{staticStyle:{height:"30px","background-color":"#eee",border:"0px"}}),e._v(" "),e._l(e.ReceivableslistData,function(t){return a("el-row",{key:t.ReceivablesName},[a("h3",[e._v(e._s(t.expenditureClass))]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.hetongzhichundata,border:"","show-summary":"","summary-method":e.jsondata.getSummaries}},[a("el-table-column",{attrs:{prop:"SupplierName",label:"收款名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReceivablesName",label:"收款内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"应支付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"已支付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"invoice",label:"收到发票"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivablesend",label:"未付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractdate",label:"签约日期"}})],1)],1)})],2)},staticRenderFns:[]};var y=a("VU/8")(h,g,!1,function(e){a("9UPO")},null,null).exports,j={data:function(){return{hetongjiner:0,yingshou:0,zongshouru:0,weishou:0,weikaifapiao:0,projectNameid:"",projectName:"",public:[],Customerlist:[],tableData:[],dialogAddVisible:!1,dialogFormVisible:!1,formModify:{id:"",ReceivablesName:"",ReceivablesData:"",ReceivablesMode:"",number:"",contract:"",Remarks:"",Receivablesend:"",projectId:"",invoice:"",Receivables:"",daozhangdate:"",kaifapiaodate:""},TransactionList:{},formTransactionCon:"",formTransactionList:{},formTransaction:{MoneyClass:"",CollectMoney:"",AmountMoney:"",invoice:"",projectId:this.$route.params.id},income:{},form:{ReceivablesName:"",ReceivablesData:"",ReceivablesMode:"",number:"",contract:"",Remarks:"",projectId:this.$route.params.id,invoice:"",Receivableslist:"",Receivables:"",daozhangdate:"",kaifapiaodate:"",projectlist:""},dataList:[],rules:{}}},props:{map:{}},watch:{},mounted:function(){this.getdata(),this.getFormDataPojname()},methods:{submitFormModify:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.updatpostData()})},updatpostData:function(){var e=this;return this.jsondata.updatpostData("Receivables",this.formModify).then(function(t){e.getdata(),e.dialogAddVisible=!1}).catch(function(e){console.log(e)}),!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.postData()})},resetForm:function(e){this.$refs[e].resetFields(),this.form.daozhangdate="",this.form.kaifapiaodate="",this.form.Receivableslist=""},postData:function(){var e=this;return this.jsondata.postData("Receivables",this.form).then(function(t){"OK"===t.data&&(e.dialogFormVisible=!1,e.getdata(),e.resetForm("form"))}).catch(function(e){console.log(e)}),!1},getdataincome:function(){var e=this;return this.jsondata.getDataClass("RevenueContract",this.$route.params.id,"id").then(function(t){e.projectName=t.data[0].ReceivablesName,e.projectNameid=t.data[0].projectId,e.hetongjiner=t.data[0].number,e.income=t.data,e.form.projectlist=t.data[0].projectId,Number(e.hetongjiner)==Number(e.yingshou)?document.querySelector(".colorRed").style.color="#555":document.querySelector(".colorRed").style.color="#f00"}).catch(function(e){console.log(e)}),!1},getdata:function(){var e=this;return this.hetongjiner=0,this.yingshou=0,this.zongshouru=0,this.weishou=0,this.weikaifapiao=0,this.jsondata.getDataClass("Receivables",this.$route.params.id,"projectId").then(function(t){e.tableData=t.data.sort(function(e,t){return(e.id+"").localeCompare(t.id+"")}).reverse(),e.tableData=e.tableData.sort(function(e,t){return(e.Receivableslist+"").localeCompare(t.Receivableslist+"")}).reverse();for(var a=0;a<e.tableData.length;a++){if(e.tableData[a].weikaifapiao=0,""===e.tableData[a].daozhangdate&&(e.tableData[a].daozhangdate=e.tableData[a].kaifapiaodate),""==e.tableData[a].number)e.tableData[a].Receivablesend="";else{e.tableData[a].Receivablesend=Number(e.tableData[a].number);for(var o=0;o<e.tableData.length;o++)e.tableData[a].Receivableslist==e.tableData[o].Receivableslist&&(e.tableData[a].Receivablesend-=Number(e.tableData[o].Receivables),e.tableData[a].weikaifapiao+=Number(e.tableData[o].invoice)-Number(e.tableData[o].Receivables))}e.tableData[a].weikaifapiao=e.jsondata.currency(e.tableData[a].weikaifapiao,"￥",2),e.tableData[a].Receivablesend=e.jsondata.currency(e.tableData[a].Receivablesend,"￥",2)}e.dataList=e.jsondata.getSpanArr(e.tableData,"Receivableslist");for(var i=0;i<e.tableData.length;i++)e.yingshou+=Number(e.tableData[i].number),e.zongshouru+=Number(e.tableData[i].Receivables),e.weikaifapiao+=Number(e.tableData[i].invoice),e.tableData[i].number=e.jsondata.currency(e.tableData[i].number,"￥",2),e.tableData[i].Receivables=e.jsondata.currency(e.tableData[i].Receivables,"￥",2),e.tableData[i].invoice=e.jsondata.currency(e.tableData[i].invoice,"￥",2);e.weishou=Number(e.yingshou)-Number(e.zongshouru),e.getdataincome()}).catch(function(e){console.log(e)}),!1},deletepost:function(){var e=this;this.jsondata.deletepost("Receivables",this.formModify.id).then(function(t){"OK"===t.data&&(e.dialogAddVisible=!1,e.getdata())}).catch(function(e){console.log(e)})},handle:function(e){var t=this;return this.dialogAddVisible=!0,this.jsondata.getDataId("Receivables",e.id).then(function(e){t.formModify=e.data[0]}).catch(function(e){console.log(e)}),!1},postFormData:function(e,t){return this.jsondata.postData(e,t).then(function(e){console.log(e.data)}).catch(function(e){console.log(e)}),!1},getFormData:function(e){var t=this;this.jsondata.getData("getposts").then(function(e){return t.public=e,t.public}).catch(function(e){console.log(e)})},getFormDataPojname:function(){var e=this;this.jsondata.getDataId("projectList",this.$route.params.id).then(function(t){e.projectName=t.data[0].projectName}).catch(function(e){console.log(e)})},goToHome:function(){this.$router.push("/RevenueContract/"+this.projectNameid)},goToHome1:function(){this.$router.push("/ProjectDetails/"+this.projectNameid)},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(0===a||1===a||2===a||6===a||7===a){var o=this.dataList[t];return{rowspan:o,colspan:o>0?1:0}}}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",[a("span",{staticStyle:{cursor:"pointer",color:"#409EFF"},on:{click:e.goToHome1}},[e._v("返回项目 > ")]),e._v(" "),a("span",{staticStyle:{cursor:"pointer",color:"#409EFF"},on:{click:e.goToHome}},[e._v(e._s(this.projectName)+" > ")]),e._v("收款明细收入列表\n    "),a("span",{staticClass:"colorRed"},[e._v(" ----- 合同金额:"+e._s(this.jsondata.currency(this.hetongjiner,"￥",2)))]),e._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加收款")])],1),e._v(" "),a("el-dialog",{attrs:{title:"添加收款",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"收款名称",prop:"ReceivablesName"}},[a("el-input",{model:{value:e.form.ReceivablesName,callback:function(t){e.$set(e.form,"ReceivablesName",t)},expression:"form.ReceivablesName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收款时间",prop:"ReceivablesData"}},[a("el-input",{model:{value:e.form.ReceivablesData,callback:function(t){e.$set(e.form,"ReceivablesData",t)},expression:"form.ReceivablesData"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收款方式",prop:"ReceivablesMode"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.ReceivablesMode,callback:function(t){e.$set(e.form,"ReceivablesMode",t)},expression:"form.ReceivablesMode"}},[a("el-option",{attrs:{label:"现金",value:"现金"}}),e._v(" "),a("el-option",{attrs:{label:"银行",value:"银行"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"应收金额",prop:"number"}},[a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有无合同",prop:"contract"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.contract,callback:function(t){e.$set(e.form,"contract",t)},expression:"form.contract"}},[a("el-option",{attrs:{label:"有",value:"有"}}),e._v(" "),a("el-option",{attrs:{label:"无",value:"无"}})],1),e._v(" "),a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.Receivableslist,callback:function(t){e.$set(e.form,"Receivableslist",t)},expression:"form.Receivableslist"}},[a("el-option",{attrs:{label:"第1期",value:"第1期"}}),e._v(" "),a("el-option",{attrs:{label:"第2期",value:"第2期"}}),e._v(" "),a("el-option",{attrs:{label:"第3期",value:"第3期"}}),e._v(" "),a("el-option",{attrs:{label:"第4期",value:"第4期"}}),e._v(" "),a("el-option",{attrs:{label:"第5期",value:"第5期"}}),e._v(" "),a("el-option",{attrs:{label:"第6期",value:"第6期"}}),e._v(" "),a("el-option",{attrs:{label:"1年质保金",value:"1年质保金"}}),e._v(" "),a("el-option",{attrs:{label:"2年质保金",value:"2年质保金"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"到帐金额",prop:"Receivables"}},[a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.daozhangdate,callback:function(t){e.$set(e.form,"daozhangdate",t)},expression:"form.daozhangdate"}})],1),e._v(" "),a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.form.Receivables,callback:function(t){e.$set(e.form,"Receivables",t)},expression:"form.Receivables"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开出发票",prop:"invoice"}},[a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.kaifapiaodate,callback:function(t){e.$set(e.form,"kaifapiaodate",t)},expression:"form.kaifapiaodate"}})],1),e._v(" "),a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.form.invoice,callback:function(t){e.$set(e.form,"invoice",t)},expression:"form.invoice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"Remarks"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.Remarks,callback:function(t){e.$set(e.form,"Remarks",t)},expression:"form.Remarks"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确定添加")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.formModify.ReceivablesName,visible:e.dialogAddVisible},on:{"update:visible":function(t){e.dialogAddVisible=t}}},[a("el-form",{ref:"formModify",staticClass:"demo-ruleForm",attrs:{model:e.formModify,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"收款名称",prop:"ReceivablesName"}},[a("el-input",{model:{value:e.formModify.ReceivablesName,callback:function(t){e.$set(e.formModify,"ReceivablesName",t)},expression:"formModify.ReceivablesName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收款时间",prop:"ReceivablesData"}},[a("el-input",{model:{value:e.formModify.ReceivablesData,callback:function(t){e.$set(e.formModify,"ReceivablesData",t)},expression:"formModify.ReceivablesData"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收款方式",prop:"ReceivablesMode"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.ReceivablesMode,callback:function(t){e.$set(e.formModify,"ReceivablesMode",t)},expression:"formModify.ReceivablesMode"}},[a("el-option",{attrs:{label:"现金",value:"现金"}}),e._v(" "),a("el-option",{attrs:{label:"银行",value:"银行"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"应收金额",prop:"number"}},[a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.formModify.number,callback:function(t){e.$set(e.formModify,"number",t)},expression:"formModify.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有无合同",prop:"contract"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.contract,callback:function(t){e.$set(e.formModify,"contract",t)},expression:"formModify.contract"}},[a("el-option",{attrs:{label:"有",value:"有"}}),e._v(" "),a("el-option",{attrs:{label:"无",value:"无"}})],1),e._v(" "),a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.Receivableslist,callback:function(t){e.$set(e.formModify,"Receivableslist",t)},expression:"formModify.Receivableslist"}},[a("el-option",{attrs:{label:"第1期",value:"第1期"}}),e._v(" "),a("el-option",{attrs:{label:"第2期",value:"第2期"}}),e._v(" "),a("el-option",{attrs:{label:"第3期",value:"第3期"}}),e._v(" "),a("el-option",{attrs:{label:"第4期",value:"第4期"}}),e._v(" "),a("el-option",{attrs:{label:"第5期",value:"第5期"}}),e._v(" "),a("el-option",{attrs:{label:"第6期",value:"第6期"}}),e._v(" "),a("el-option",{attrs:{label:"1年质保金",value:"1年质保金"}}),e._v(" "),a("el-option",{attrs:{label:"2年质保金",value:"2年质保金"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"到帐金额"}},[a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.formModify.daozhangdate,callback:function(t){e.$set(e.formModify,"daozhangdate",t)},expression:"formModify.daozhangdate"}})],1),e._v(" "),a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.formModify.Receivables,callback:function(t){e.$set(e.formModify,"Receivables",t)},expression:"formModify.Receivables"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开出发票"}},[a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.formModify.kaifapiaodate,callback:function(t){e.$set(e.formModify,"kaifapiaodate",t)},expression:"formModify.kaifapiaodate"}})],1),e._v(" "),a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.formModify.invoice,callback:function(t){e.$set(e.formModify,"invoice",t)},expression:"formModify.invoice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"Remarks"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formModify.Remarks,callback:function(t){e.$set(e.formModify,"Remarks",t)},expression:"formModify.Remarks"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormModify("formModify")}}},[e._v("更新")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogAddVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},on:{click:e.deletepost}},[e._v("删除收款")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","highligth-current-row":"","summary-method":e.jsondata.getSummaries,"show-summary":"","span-method":e.objectSpanMethod},on:{"row-click":e.handle}},[a("el-table-column",{attrs:{prop:"Receivableslist",label:"收款分期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"应收金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReceivablesData",label:"收款时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"到账金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"invoice",label:"开出发票"}}),e._v(" "),a("el-table-column",{attrs:{prop:"daozhangdate",label:"到账时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weikaifapiao",label:"已开票未收款"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivablesend",label:"未收金额"}})],1)],1)},staticRenderFns:[]},R=a("VU/8")(j,D,!1,null,null,null).exports,_={data:function(){return{boxvalue:!0,titleSupplierName:"",hetongjiner:0,yingshou:0,zongshouru:0,weishou:0,weikaifapiao:0,projectNameid:"",projectName:"",public:[],Customerlist:[],tableData:[],dialogAddVisible:!1,dialogFormVisible:!1,formModify:{id:"",ReceivablesName:"",ReceivablesData:"",ReceivablesMode:"",number:"",contract:"",Remarks:"",Receivablesend:"",projectId:"",daozhangdate:"",kaifapiaodate:"",invoice:"",invoicebo:"",supplielist:"",Receivables:""},TransactionList:{},formTransactionCon:"",formTransactionList:[],formTransaction:{MoneyClass:"",CollectMoney:"",AmountMoney:"",invoice:"",projectId:this.$route.params.id},income:{},form:{ReceivablesName:"",ReceivablesData:"",ReceivablesMode:"",number:"",contract:"",Remarks:"",projectId:this.$route.params.id,invoice:"",Receivableslist:"",Receivables:"",daozhangdate:"",kaifapiaodate:"",supplielist:"",projectlist:""},dataList:[],rules:{}}},props:{map:{}},watch:{form:{handler:function(e,t){"不计发票"==e.invoicebo?this.boxvalue=!1:this.boxvalue=!0},deep:!0},formModify:{handler:function(e,t){"不计发票"==e.invoicebo?this.boxvalue=!1:this.boxvalue=!0},deep:!0}},mounted:function(){this.getdata(),this.getFormDataPojname()},methods:{submitFormModify:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.updatpostData()})},updatpostData:function(){var e=this;return this.jsondata.updatpostData("expenditureData",this.formModify).then(function(t){e.getdata(),e.dialogAddVisible=!1}).catch(function(e){console.log(e)}),!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.postData()})},resetForm:function(e){this.$refs[e].resetFields()},postData:function(){var e=this;return this.jsondata.postData("expenditureData",this.form).then(function(t){console.log(t.data,e.form),"OK"===t.data&&(console.log(t.data,e.form),e.dialogFormVisible=!1,e.getdata(),e.resetForm("form"))}).catch(function(e){console.log(e)}),!1},getdataincome:function(){var e=this;return this.jsondata.getDataClass("expenditure",this.$route.params.id,"id").then(function(t){e.projectName=t.data[0].ReceivablesName,e.projectNameid=t.data[0].projectId,e.hetongjiner=t.data[0].number,e.form.supplielist=t.data[0].SupplierName,e.income=t.data,e.form.projectlist=t.data[0].projectId,e.jsondata.getDataClass("supplierlist",t.data[0].SupplierName,"id").then(function(t){e.titleSupplierName=t.data[0].SupplierName}).catch(function(e){console.log(e)}),Number(e.hetongjiner)==Number(e.yingshou)?document.querySelector(".colorRed").style.color="#555":document.querySelector(".colorRed").style.color="#f00"}).catch(function(e){console.log(e)}),!1},getdata:function(){var e=this;return this.hetongjiner=0,this.yingshou=0,this.zongshouru=0,this.weishou=0,this.weikaifapiao=0,this.jsondata.getDataClass("expenditureData",this.$route.params.id,"projectId").then(function(t){e.tableData=t.data.sort(function(e,t){return(e.id+"").localeCompare(t.id+"")}).reverse(),e.tableData=e.tableData.sort(function(e,t){return(e.Receivableslist+"").localeCompare(t.Receivableslist+"")}).reverse();for(var a=0;a<e.tableData.length;a++){if(e.tableData[a].weikaifapiao=0,""!==e.tableData[a].daozhangdate&&null!=e.tableData[a].daozhangdate||(e.tableData[a].daozhangdate=e.tableData[a].kaifapiaodate),""==e.tableData[a].number)e.tableData[a].Receivablesend="";else{e.tableData[a].Receivablesend=Number(e.tableData[a].number);for(var o=0;o<e.tableData.length;o++)e.tableData[a].Receivableslist==e.tableData[o].Receivableslist&&(e.tableData[a].Receivablesend-=Number(e.tableData[o].Receivables),"不计发票"!==e.tableData[o].invoicebo&&(e.tableData[a].weikaifapiao+=Number(e.tableData[o].Receivables)-Number(e.tableData[o].invoice)))}e.tableData[a].weikaifapiao=e.jsondata.currency(e.tableData[a].weikaifapiao,"￥",2),e.tableData[a].Receivablesend=e.jsondata.currency(e.tableData[a].Receivablesend,"￥",2)}e.dataList=e.jsondata.getSpanArr(e.tableData,"Receivableslist");for(var i=0;i<e.tableData.length;i++)e.yingshou+=Number(e.tableData[i].number),e.zongshouru+=Number(e.tableData[i].Receivables),e.tableData[i].number=e.jsondata.currency(e.tableData[i].number,"￥",2),"不计发票"!=e.tableData[i].invoicebo?(e.weikaifapiao+=Number(e.tableData[i].invoice),e.tableData[i].invoice=e.jsondata.currency(e.tableData[i].invoice,"￥",2)):(e.tableData[i].invoice="不计发票",e.weikaifapiao+=Number(e.tableData[i].Receivables)),e.tableData[i].Receivables=e.jsondata.currency(e.tableData[i].Receivables,"￥",2);e.weishou=Number(e.yingshou)-Number(e.zongshouru),e.weikaifapiao=Number(e.zongshouru)-Number(e.weikaifapiao),e.getdataincome()}).catch(function(e){console.log(e)}),!1},deletepost:function(){var e=this;this.jsondata.deletepost("expenditureData",this.formModify.id).then(function(t){console.log(t.data),"OK"===t.data&&(e.dialogAddVisible=!1,e.getdata())}).catch(function(e){console.log(e)})},handle:function(e){var t=this;return this.dialogAddVisible=!0,this.jsondata.getDataId("expenditureData",e.id).then(function(e){t.formModify=e.data[0]}).catch(function(e){console.log(e)}),!1},postFormData:function(e,t){return this.jsondata.postData(e,t).then(function(e){console.log(e.data)}).catch(function(e){console.log(e)}),!1},getFormData:function(e){var t=this;this.jsondata.getData("getposts").then(function(e){return t.public=e,t.public}).catch(function(e){console.log(e)})},getFormDataPojname:function(){var e=this;this.jsondata.getDataId("projectList",this.$route.params.id).then(function(t){e.projectName=t.data[0].projectName}).catch(function(e){console.log(e)})},goToHome:function(){this.$router.push("/expenditureContract/"+this.projectNameid)},goToHome1:function(){this.$router.push("/ProjectDetails/"+this.projectNameid)},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(0===a||1===a||2===a||6===a||7===a){var o=this.dataList[t];return{rowspan:o,colspan:o>0?1:0}}}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",[a("span",{staticStyle:{cursor:"pointer",color:"#409EFF"},on:{click:e.goToHome1}},[e._v("返回项目 > ")]),e._v(" "),a("span",{staticStyle:{cursor:"pointer",color:"#409EFF"},on:{click:e.goToHome}},[e._v("返回合同 > ")]),e._v(e._s(this.titleSupplierName)+" ----- "+e._s(this.projectName)+"\n    "),a("span",{staticClass:"colorRed"},[e._v(" ----- 合同金额:"+e._s(this.jsondata.currency(this.hetongjiner,"￥",2)))])]),e._v(" "),a("el-dialog",{attrs:{title:"添加付款",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"付款名称",prop:"ReceivablesName"}},[a("el-input",{model:{value:e.form.ReceivablesName,callback:function(t){e.$set(e.form,"ReceivablesName",t)},expression:"form.ReceivablesName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"付款时间",prop:"ReceivablesData"}},[a("el-input",{model:{value:e.form.ReceivablesData,callback:function(t){e.$set(e.form,"ReceivablesData",t)},expression:"form.ReceivablesData"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"付款方式",prop:"ReceivablesMode"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.ReceivablesMode,callback:function(t){e.$set(e.form,"ReceivablesMode",t)},expression:"form.ReceivablesMode"}},[a("el-option",{attrs:{label:"现金",value:"现金"}}),e._v(" "),a("el-option",{attrs:{label:"银行",value:"银行"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"应付金额",prop:"number"}},[a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有无合同",prop:"contract"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.contract,callback:function(t){e.$set(e.form,"contract",t)},expression:"form.contract"}},[a("el-option",{attrs:{label:"有",value:"有"}}),e._v(" "),a("el-option",{attrs:{label:"无",value:"无"}})],1),e._v(" "),a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.Receivableslist,callback:function(t){e.$set(e.form,"Receivableslist",t)},expression:"form.Receivableslist"}},[a("el-option",{attrs:{label:"第1期",value:"第1期"}}),e._v(" "),a("el-option",{attrs:{label:"第2期",value:"第2期"}}),e._v(" "),a("el-option",{attrs:{label:"第3期",value:"第3期"}}),e._v(" "),a("el-option",{attrs:{label:"第4期",value:"第4期"}}),e._v(" "),a("el-option",{attrs:{label:"第5期",value:"第5期"}}),e._v(" "),a("el-option",{attrs:{label:"保质金",value:"保质金"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"付款金额",prop:"Receivables"}},[a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.daozhangdate,callback:function(t){e.$set(e.form,"daozhangdate",t)},expression:"form.daozhangdate"}})],1),e._v(" "),a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.form.Receivables,callback:function(t){e.$set(e.form,"Receivables",t)},expression:"form.Receivables"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收到发票",prop:"invoice"}},[e.boxvalue?a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.kaifapiaodate,callback:function(t){e.$set(e.form,"kaifapiaodate",t)},expression:"form.kaifapiaodate"}})],1):e._e(),e._v(" "),e.boxvalue?a("el-input",{staticStyle:{width:"25%"},attrs:{type:"number"},model:{value:e.form.invoice,callback:function(t){e.$set(e.form,"invoice",t)},expression:"form.invoice"}}):e._e(),e._v(" "),a("el-select",{staticStyle:{width:"20%"},attrs:{placeholder:"请选择"},model:{value:e.form.invoicebo,callback:function(t){e.$set(e.form,"invoicebo",t)},expression:"form.invoicebo"}},[a("el-option",{attrs:{label:"有",value:"有"}}),e._v(" "),a("el-option",{attrs:{label:"不计发票",value:"不计发票"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"Remarks"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.Remarks,callback:function(t){e.$set(e.form,"Remarks",t)},expression:"form.Remarks"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确定添加")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.formModify.ReceivablesName,visible:e.dialogAddVisible},on:{"update:visible":function(t){e.dialogAddVisible=t}}},[a("el-form",{ref:"formModify",staticClass:"demo-ruleForm",attrs:{model:e.formModify,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"付款名称",prop:"ReceivablesName"}},[a("el-input",{model:{value:e.formModify.ReceivablesName,callback:function(t){e.$set(e.formModify,"ReceivablesName",t)},expression:"formModify.ReceivablesName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"付款时间",prop:"ReceivablesData"}},[a("el-input",{model:{value:e.formModify.ReceivablesData,callback:function(t){e.$set(e.formModify,"ReceivablesData",t)},expression:"formModify.ReceivablesData"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"付款方式",prop:"ReceivablesMode"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.ReceivablesMode,callback:function(t){e.$set(e.formModify,"ReceivablesMode",t)},expression:"formModify.ReceivablesMode"}},[a("el-option",{attrs:{label:"现金",value:"现金"}}),e._v(" "),a("el-option",{attrs:{label:"银行",value:"银行"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"付款金额",prop:"number"}},[a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.formModify.number,callback:function(t){e.$set(e.formModify,"number",t)},expression:"formModify.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有无合同",prop:"contract"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.contract,callback:function(t){e.$set(e.formModify,"contract",t)},expression:"formModify.contract"}},[a("el-option",{attrs:{label:"有",value:"有"}}),e._v(" "),a("el-option",{attrs:{label:"无",value:"无"}})],1),e._v(" "),a("el-select",{staticStyle:{width:"46%"},attrs:{disabled:!1,placeholder:"请选择"},model:{value:e.formModify.Receivableslist,callback:function(t){e.$set(e.formModify,"Receivableslist",t)},expression:"formModify.Receivableslist"}},[a("el-option",{attrs:{label:"第1期",value:"第1期"}}),e._v(" "),a("el-option",{attrs:{label:"第2期",value:"第2期"}}),e._v(" "),a("el-option",{attrs:{label:"第3期",value:"第3期"}}),e._v(" "),a("el-option",{attrs:{label:"第4期",value:"第4期"}}),e._v(" "),a("el-option",{attrs:{label:"第5期",value:"第5期"}}),e._v(" "),a("el-option",{attrs:{label:"保质金",value:"保质金"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"付款金额",prop:"Receivables"}},[a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.formModify.daozhangdate,callback:function(t){e.$set(e.formModify,"daozhangdate",t)},expression:"formModify.daozhangdate"}})],1),e._v(" "),a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.formModify.Receivables,callback:function(t){e.$set(e.formModify,"Receivables",t)},expression:"formModify.Receivables"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"收到发票",prop:"invoice"}},[e.boxvalue?a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.formModify.kaifapiaodate,callback:function(t){e.$set(e.formModify,"kaifapiaodate",t)},expression:"formModify.kaifapiaodate"}})],1):e._e(),e._v(" "),e.boxvalue?a("el-input",{staticStyle:{width:"25%"},attrs:{type:"number"},model:{value:e.formModify.invoice,callback:function(t){e.$set(e.formModify,"invoice",t)},expression:"formModify.invoice"}}):e._e(),e._v(" "),a("el-select",{staticStyle:{width:"20%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.invoicebo,callback:function(t){e.$set(e.formModify,"invoicebo",t)},expression:"formModify.invoicebo"}},[a("el-option",{attrs:{label:"有",value:"有"}}),e._v(" "),a("el-option",{attrs:{label:"不计发票",value:"不计发票"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"Remarks"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formModify.Remarks,callback:function(t){e.$set(e.formModify,"Remarks",t)},expression:"formModify.Remarks"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormModify("formModify")}}},[e._v("更新")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogAddVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},on:{click:e.deletepost}},[e._v("删除收款")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","highligth-current-row":"","summary-method":e.jsondata.getSummaries,"show-summary":"",height:"90%","span-method":e.objectSpanMethod},on:{"row-click":e.handle}},[a("el-table-column",{attrs:{prop:"Receivableslist",label:"收款分期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"应收金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReceivablesData",label:"付款时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"付款金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"invoice",label:"收到发票"}}),e._v(" "),a("el-table-column",{attrs:{prop:"daozhangdate",label:"时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weikaifapiao",label:"已经付未开票"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivablesend",label:"未付金额"}})],1),e._v(" "),a("p",{staticStyle:{"text-align":"left","font-size":"15px",color:"#555","font-weight":"bold"},attrs:{type:"error"}})],1)},staticRenderFns:[]},k=a("VU/8")(_,x,!1,null,null,null).exports,C={data:function(){return{public:[],Customerlist:[],tableData:[],dialogAddVisible:!1,dialogFormVisible:!1,formModify:{},TransactionList:{},formTransactionCon:"",formTransactionList:[],form:{SupplierName:"",SupplierClass:"",SupplierCon:""},rules:{SupplierName:[{required:!0,message:"请输入收款方名称",trigger:"blur"}],SupplierClass:[{required:!0,message:"请选择",trigger:"blur"}]}}},props:{map:{}},watch:{},mounted:function(){this.getdata()},methods:{submitFormModify:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.updatpostData()})},updatpostData:function(){var e=this;return this.jsondata.updatpostData("SupplierList",this.formModify).then(function(t){"OK"===t.data&&(e.dialogAddVisible=!1,e.getdata())}).catch(function(e){console.log(e)}),!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.postData()})},resetForm:function(e){this.$refs[e].resetFields()},postData:function(){var e=this;this.jsondata.getData("SupplierList").then(function(t){for(var a=0;a<t.data.length;a++){if(e.form.SupplierName===t.data[a].SupplierName)return document.querySelector("#infoint").style.display="block",!1;document.querySelector("#infoint").style.display="none"}e.jsondata.postData("SupplierList",e.form).then(function(t){"OK"===t.data&&(e.dialogFormVisible=!1,e.getdata(),e.resetForm("form"))}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},getdata:function(){var e=this;return this.jsondata.getData("SupplierList").then(function(t){e.tableData=t.data}).catch(function(e){console.log(e)}),!1},deletepost:function(){var e=this;this.jsondata.deletepost("SupplierList",this.formModify.id).then(function(t){"OK"===t.data&&(e.dialogAddVisible=!1,e.getdata())}).catch(function(e){console.log(e)})},handle:function(e,t,a){this.dialogAddVisible=!0,this.formModify=e}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",[e._v("\n    供应商及付款人列表"+e._s(this.$route.params.id)+"\n    "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{attrs:{title:"添加付款方",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"付款名称",prop:"SupplierName"}},[a("el-input",{model:{value:e.form.SupplierName,callback:function(t){e.$set(e.form,"SupplierName",t)},expression:"form.SupplierName"}}),e._v(" "),a("p",{staticStyle:{display:"none",color:"#f00"},attrs:{id:"infoint"}},[e._v("名字重复")])],1),e._v(" "),a("el-form-item",{attrs:{label:"付款分类",prop:"SupplierClass"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.SupplierClass,callback:function(t){e.$set(e.form,"SupplierClass",t)},expression:"form.SupplierClass"}},[a("el-option",{attrs:{label:"供应商",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"员工",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"外包人员",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"SupplierCon"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.SupplierCon,callback:function(t){e.$set(e.form,"SupplierCon",t)},expression:"form.SupplierCon"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确定添加")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.formModify.ReceivablesName,visible:e.dialogAddVisible},on:{"update:visible":function(t){e.dialogAddVisible=t}}},[a("el-form",{ref:"formModify",staticClass:"demo-ruleForm",attrs:{model:e.formModify,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"付款名称",prop:"SupplierName"}},[a("el-input",{model:{value:e.formModify.SupplierName,callback:function(t){e.$set(e.formModify,"SupplierName",t)},expression:"formModify.SupplierName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"SupplierCon"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formModify.SupplierCon,callback:function(t){e.$set(e.formModify,"SupplierCon",t)},expression:"formModify.SupplierCon"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormModify("formModify")}}},[e._v("更新")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogAddVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},on:{click:e.deletepost}},[e._v("删除")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"row-click":e.handle}},[a("el-table-column",{attrs:{prop:"SupplierName",label:"付款名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"SupplierCon",label:"备注",sortable:""}})],1)],1)},staticRenderFns:[]},M=a("VU/8")(C,N,!1,null,null,null).exports,S={data:function(){return{public:[],Customerlist:[],tableData:[],dialogAddVisible:!1,dialogFormVisible:!1,formModify:{},TransactionList:{},formTransactionCon:"",formTransactionList:[],form:{CustomerName:"",CustomerContent:""},rules:{CustomerName:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},props:{map:{}},watch:{},mounted:function(){this.getdata()},methods:{submitFormModify:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.updatpostData()})},updatpostData:function(){var e=this;return this.jsondata.updatpostData("Customerlist",this.formModify).then(function(t){"OK"===t.data&&(e.dialogAddVisible=!1,e.getdata())}).catch(function(e){console.log(e)}),!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.postData()})},resetForm:function(e){this.$refs[e].resetFields()},postData:function(){var e=this;return this.jsondata.postData("Customerlist",this.form).then(function(t){"OK"===t.data&&(console.log(t.data,e.form),e.dialogFormVisible=!1,e.getdata(),e.resetForm("form"))}).catch(function(e){console.log(e)}),!1},getdata:function(){var e=this;return this.jsondata.getData("Customerlist").then(function(t){e.tableData=t.data}).catch(function(e){console.log(e)}),!1},deletepost:function(){var e=this;this.jsondata.deletepost("Customerlist",this.formModify.id).then(function(t){"OK"===t.data&&(e.dialogAddVisible=!1,e.getdata())}).catch(function(e){console.log(e)})},handle:function(e,t,a){var o=this;return this.dialogAddVisible=!0,this.jsondata.getDataId("Customerlist",e.id).then(function(e){o.formModify=e.data[0],console.log(o.formModify)}).catch(function(e){console.log(e)}),!1}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",[e._v("\n    客户列表"+e._s(this.$route.params.id)+"\n    "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{attrs:{title:"添加客户",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"客户名称",prop:"CustomerName"}},[a("el-input",{model:{value:e.form.CustomerName,callback:function(t){e.$set(e.form,"CustomerName",t)},expression:"form.CustomerName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"CustomerContent"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.CustomerContent,callback:function(t){e.$set(e.form,"CustomerContent",t)},expression:"form.CustomerContent"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确定添加")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.formModify.ReceivablesName,visible:e.dialogAddVisible},on:{"update:visible":function(t){e.dialogAddVisible=t}}},[a("el-form",{ref:"formModify",staticClass:"demo-ruleForm",attrs:{model:e.formModify,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"客户名称",prop:"CustomerName"}},[a("el-input",{model:{value:e.formModify.CustomerName,callback:function(t){e.$set(e.formModify,"CustomerName",t)},expression:"formModify.CustomerName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"CustomerContent"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formModify.CustomerContent,callback:function(t){e.$set(e.formModify,"CustomerContent",t)},expression:"formModify.CustomerContent"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormModify("formModify")}}},[e._v("更新")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogAddVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},on:{click:e.deletepost}},[e._v("删除")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"row-click":e.handle}},[a("el-table-column",{attrs:{prop:"CustomerName",label:"客户名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"CustomerContent",label:"备注",sortable:""}})],1)],1)},staticRenderFns:[]},$=a("VU/8")(S,w,!1,null,null,null).exports,F={data:function(){return{Receivablesnb:0,kaifapiao:0,projectcon:{CustomerName:"",projectId:"",ReceivablesName:"",number:"",Receivables:0,Receivablesend:"",kaifapiao:"",ReceivablesData:""},zhongshouru:"",weishoukuan:"",public:[],tableData:[]}},props:{map:{}},watch:{},mounted:function(){this.getdata()},methods:{getdata:function(){var e=this;return this.jsondata.getDataClass("projectList","0","complete").then(function(t){e.jsondata.getData("RevenueContract").then(function(a){e.jsondata.getData("Receivables").then(function(o){e.jsondata.getData("customerlist").then(function(i){for(var l=0;l<t.data.length;l++)for(var r=0;r<a.data.length;r++)if(t.data[l].id==a.data[r].projectId){for(var n=0;n<o.data.length;n++)o.data[n].projectId==a.data[r].id&&(e.Receivablesnb+=Number(o.data[n].Receivables),e.kaifapiao+=Number(o.data[n].invoice));e.projectcon=a.data[r],e.projectcon.Receivablesend=e.jsondata.currency(Number(a.data[r].number)-Number(e.Receivablesnb),"￥",2),e.projectcon.CustomerName=t.data[l].CustomerName,e.projectcon.number=e.jsondata.currency(e.projectcon.number,"￥",2),e.projectcon.invoice=e.jsondata.currency(e.kaifapiao-e.Receivablesnb,"￥",2),e.projectcon.Receivables=e.jsondata.currency(e.Receivablesnb,"￥",2),e.projectcon.projectId=t.data[l].projectName,e.tableData.push(e.projectcon),e.Receivablesnb=0,e.kaifapiao=0}e.dataList=e.jsondata.getSpanArr(e.tableData,"projectId"),e.tableData=e.jsondata.fordata(i.data,e.tableData,"CustomerName","CustomerName")}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),!1},handle:function(e,t,a){},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(0===a||1===a){var o=this.dataList[t];return{rowspan:o,colspan:o>0?1:0}}}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",[e._v("\n    收入列表\n    ")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","highligth-current-row":"","summary-method":e.jsondata.getSummaries,"show-summary":"","span-method":e.objectSpanMethod,fixed:""},on:{"row-click":e.handle}},[a("el-table-column",{attrs:{prop:"projectId",label:"项目名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CustomerName",label:"签约公司"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReceivablesName",label:"项目内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"合同金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"到帐金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivablesend",label:"未收金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"invoice",label:"已开发票未收款"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReceivablesData",label:"签约时间"}})],1)],1)},staticRenderFns:[]},z=a("VU/8")(F,V,!1,null,null,null).exports,A={data:function(){return{Receivablesnb:0,bujikaifapiao:0,kaifapiao:0,zhongshouru:"",weishoukuan:"",projectName:"",Customerlist:[],tableData:[]}},props:{map:{}},watch:{},mounted:function(){this.getdata()},methods:{getdata:function(){var e=this;return this.jsondata.getDataClass("projectList","0","complete").then(function(t){e.jsondata.getData("expenditure").then(function(a){e.jsondata.getData("expenditureData").then(function(o){e.jsondata.getData("supplierlist").then(function(i){e.jsondata.getData("expenditureclass").then(function(l){for(var r=0;r<t.data.length;r++)for(var n=0;n<a.data.length;n++)if(t.data[r].id==a.data[n].projectId){for(var s=0;s<o.data.length;s++)o.data[s].projectId==a.data[n].id&&("不计发票"==o.data[s].invoicebo?e.bujikaifapiao+=Number(o.data[s].number):e.kaifapiao+=Number(o.data[s].invoice),e.Receivablesnb+=Number(o.data[s].Receivables));e.projectcon=a.data[n],"不计发票"==a.data[n].invoicebo?e.projectcon.invoice="不计发票":e.projectcon.invoice=e.jsondata.currency(e.Receivablesnb-e.kaifapiao,"￥",2),e.projectcon.Receivablesend=e.jsondata.currency(Number(a.data[n].number)-Number(e.Receivablesnb),"￥",2),e.projectcon.number=e.jsondata.currency(e.projectcon.number,"￥",2),e.projectcon.Receivables=e.jsondata.currency(e.Receivablesnb,"￥",2),e.projectcon.projectId=t.data[r].projectName,e.tableData.push(e.projectcon),e.Receivablesnb=0,e.kaifapiao=0}e.dataList=e.jsondata.getSpanArr(e.tableData,"projectId"),e.tableData=e.jsondata.fordata(i.data,e.tableData,"SupplierName","SupplierName"),e.tableData=e.jsondata.fordata(l.data,e.tableData,"expenditureClass","projectClass")}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),!1},handle:function(e,t,a){},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex;if(0===e.columnIndex){var a=this.dataList[t];return{rowspan:a,colspan:a>0?1:0}}}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",{staticStyle:{color:"#333"}},[e._v("\n    支出列表\n  ")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","span-method":e.objectSpanMethod,"summary-method":e.jsondata.getSummaries,"show-summary":""},on:{"row-click":e.handle}},[a("el-table-column",{attrs:{prop:"projectId",label:"项目名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SupplierName",label:"收款方"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReceivablesName",label:"项目内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"应支付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"已支付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivablesend",label:"未支付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"invoice",label:"已付款未收发票"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectClass",label:"支出类别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractdate",label:"签约日期"}})],1)],1)},staticRenderFns:[]},T=a("VU/8")(A,L,!1,null,null,null).exports,I={data:function(){return{weikaifapiao:0,projectName:"",public:[],Customerlist:[],tableData:[],dialogAddVisible:!1,dialogFormVisible:!1,formModify:{id:"",ReceivablesName:"",ReceivablesData:"",ReceivablesMode:"",number:"",contract:"",Remarks:"",projectId:this.$route.params.id,Receivableslist:""},TransactionList:{},formTransactionCon:"",formTransactionList:[],formTransaction:{MoneyClass:"",CollectMoney:"",AmountMoney:"",invoice:"",projectId:this.$route.params.id},form:{ReceivablesName:"",ReceivablesData:"",ReceivablesMode:"",number:"",contract:"",Remarks:"",projectId:this.$route.params.id,Receivableslist:""},rules:{ReceivablesName:[{required:!0,message:"请输入收款名称",trigger:"blur"}]}}},props:{map:{}},watch:{},mounted:function(){this.getdata(),this.getFormDataPojname()},methods:{submitFormModify:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.updatpostData()})},updatpostData:function(){var e=this;return this.jsondata.updatpostData("RevenueContract",this.formModify).then(function(t){e.dialogAddVisible=!1,e.getdata()}).catch(function(e){console.log(e)}),!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.postData()})},resetForm:function(e){this.$refs[e].resetFields()},postData:function(){var e=this;return this.jsondata.postData("RevenueContract",this.form).then(function(t){console.log(t.data,e.form),"OK"===t.data&&(console.log(t.data,e.form),e.dialogFormVisible=!1,e.getdata(),e.resetForm("form"))}).catch(function(e){console.log(e)}),!1},getdata:function(){var e=this;return this.weikaifapiao=0,this.jsondata.getData("Receivables").then(function(t){e.formTransactionList=t.data,e.jsondata.getDataClass("RevenueContract",e.$route.params.id,"projectId").then(function(t){e.tableData=t.data;for(var a=0;a<e.tableData.length;a++){e.tableData[a].Receivables=0,e.tableData[a].invoice=0,e.tableData[a].Receivablesend=0,e.tableData[a].weikaifapiao=0;for(var o=0;o<e.formTransactionList.length;o++)e.tableData[a].id==e.formTransactionList[o].projectId&&(e.tableData[a].Receivables+=Number(e.formTransactionList[o].Receivables),e.tableData[a].invoice+=Number(e.formTransactionList[o].invoice));e.tableData[a].weikaifapiao=e.jsondata.currency(Number(e.tableData[a].invoice)-Number(e.tableData[a].Receivables),"￥",2),e.tableData[a].Receivablesend=e.jsondata.currency(e.tableData[a].number-e.tableData[a].Receivables,"￥",2),e.tableData[a].Receivables=e.jsondata.currency(e.tableData[a].Receivables,"￥",2),e.tableData[a].invoice=e.jsondata.currency(e.tableData[a].invoice,"￥",2),e.tableData[a].number=e.jsondata.currency(e.tableData[a].number,"￥",2)}}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),!1},deletepost:function(){var e=this;this.jsondata.deletepost("RevenueContract",this.formModify.id).then(function(t){console.log(t.data),"OK"===t.data&&(e.dialogAddVisible=!1,e.getdata())}).catch(function(e){console.log(e)})},handleClick:function(e){this.$router.push("/Receivables/"+e.id)},handle:function(e){var t=this;return this.dialogAddVisible=!0,this.jsondata.getDataId("RevenueContract",e.id).then(function(e){t.formModify=e.data[0]}).catch(function(e){console.log(e)}),!1},postFormData:function(e,t){return this.jsondata.postData(e,t).then(function(e){console.log(e.data)}).catch(function(e){console.log(e)}),!1},getFormData:function(e){var t=this;this.jsondata.getData("getposts").then(function(e){return t.public=e,t.public}).catch(function(e){console.log(e)})},getFormDataPojname:function(){var e=this;this.jsondata.getDataId("projectList",this.$route.params.id).then(function(t){e.projectName=t.data[0].projectName}).catch(function(e){console.log(e)})},goToHome:function(){this.$router.push("/ProjectDetails/"+this.$route.params.id)}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",[a("span",{staticStyle:{cursor:"pointer",color:"#409EFF"},on:{click:e.goToHome}},[e._v(e._s(this.projectName)+"-项目 > ")]),e._v("合同列表\n    "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加合同")])],1),e._v(" "),a("el-dialog",{attrs:{title:"添加收款",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"合同名称",prop:"ReceivablesName"}},[a("el-input",{model:{value:e.form.ReceivablesName,callback:function(t){e.$set(e.form,"ReceivablesName",t)},expression:"form.ReceivablesName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"签约时间",prop:"ReceivablesData"}},[a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.ReceivablesData,callback:function(t){e.$set(e.form,"ReceivablesData",t)},expression:"form.ReceivablesData"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"收款方式",prop:"ReceivablesMode"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.ReceivablesMode,callback:function(t){e.$set(e.form,"ReceivablesMode",t)},expression:"form.ReceivablesMode"}},[a("el-option",{attrs:{label:"现金",value:"现金"}}),e._v(" "),a("el-option",{attrs:{label:"银行",value:"银行"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"应收金额",prop:"number"}},[a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有无合同",prop:"contract"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.contract,callback:function(t){e.$set(e.form,"contract",t)},expression:"form.contract"}},[a("el-option",{attrs:{label:"有",value:"有"}}),e._v(" "),a("el-option",{attrs:{label:"无",value:"无"}})],1),e._v(" "),a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.Receivableslist,callback:function(t){e.$set(e.form,"Receivableslist",t)},expression:"form.Receivableslist"}},[a("el-option",{attrs:{label:"1期",value:"1期"}}),e._v(" "),a("el-option",{attrs:{label:"2期",value:"2期"}}),e._v(" "),a("el-option",{attrs:{label:"3期",value:"3期"}}),e._v(" "),a("el-option",{attrs:{label:"4期",value:"4期"}}),e._v(" "),a("el-option",{attrs:{label:"5期",value:"5期"}}),e._v(" "),a("el-option",{attrs:{label:"6期",value:"6期"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"Remarks"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.Remarks,callback:function(t){e.$set(e.form,"Remarks",t)},expression:"form.Remarks"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确定添加")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改合同",visible:e.dialogAddVisible},on:{"update:visible":function(t){e.dialogAddVisible=t}}},[a("el-form",{ref:"formModify",staticClass:"demo-ruleForm",attrs:{model:e.formModify,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"合同名称",prop:"ReceivablesName"}},[a("el-input",{model:{value:e.formModify.ReceivablesName,callback:function(t){e.$set(e.formModify,"ReceivablesName",t)},expression:"formModify.ReceivablesName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"签约时间",prop:"ReceivablesData"}},[a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.formModify.ReceivablesData,callback:function(t){e.$set(e.formModify,"ReceivablesData",t)},expression:"formModify.ReceivablesData"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"收款方式",prop:"ReceivablesMode"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.ReceivablesMode,callback:function(t){e.$set(e.formModify,"ReceivablesMode",t)},expression:"formModify.ReceivablesMode"}},[a("el-option",{attrs:{label:"现金",value:"现金"}}),e._v(" "),a("el-option",{attrs:{label:"银行",value:"银行"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"应收金额",prop:"number"}},[a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.formModify.number,callback:function(t){e.$set(e.formModify,"number",t)},expression:"formModify.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"有无合同",prop:"contract"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.contract,callback:function(t){e.$set(e.formModify,"contract",t)},expression:"formModify.contract"}},[a("el-option",{attrs:{label:"有",value:"有"}}),e._v(" "),a("el-option",{attrs:{label:"无",value:"无"}})],1),e._v(" "),a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.Receivableslist,callback:function(t){e.$set(e.formModify,"Receivableslist",t)},expression:"formModify.Receivableslist"}},[a("el-option",{attrs:{label:"1期",value:"1期"}}),e._v(" "),a("el-option",{attrs:{label:"2期",value:"2期"}}),e._v(" "),a("el-option",{attrs:{label:"3期",value:"3期"}}),e._v(" "),a("el-option",{attrs:{label:"4期",value:"4期"}}),e._v(" "),a("el-option",{attrs:{label:"5期",value:"5期"}}),e._v(" "),a("el-option",{attrs:{label:"6期",value:"6期"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"Remarks"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formModify.Remarks,callback:function(t){e.$set(e.formModify,"Remarks",t)},expression:"formModify.Remarks"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormModify("formModify")}}},[e._v("更新")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogAddVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},on:{click:e.deletepost}},[e._v("删除收款")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","summary-method":e.jsondata.getSummaries,"show-summary":""}},[a("el-table-column",{attrs:{prop:"ReceivablesName",label:"合同名称",width:"300",sortable:""},on:{"cell-click":e.handle}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivableslist",label:"收款分期",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"同合金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReceivablesData",label:"签约时间",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"到帐金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivablesend",label:"未收金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"invoice",label:"开出发票",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"weikaifapiao",label:"已开票未收款",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("收款")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handle(t.row)}}},[e._v("编辑")])]}}])})],1)],1)},staticRenderFns:[]},O=a("VU/8")(I,E,!1,null,null,null).exports,P={data:function(){return{boxvalue:!0,boxvalue1:!1,hetongjiner:0,yingshou:0,zongshouru:0,weishou:0,biujifapiao:0,weikaifapiao:0,formbf:[],projectName:"",Customerlist:[],tableData:[],dialogAddVisible:!1,dialogFormVisible:!1,formModify:{},TransactionList:{},formTransactionCon:"",formTransactionList:[],formTransaction:{MoneyClass:"",CollectMoney:"",AmountMoney:"",invoice:"",projectId:this.$route.params.id},form:{ReceivablesName:"",projectId:this.$route.params.id,number:"",ReceivablesData:"",contract:"",Remarks:"",invoice:"",invoicebo:"",kaifapiaodate:"",daozhangdate:"",Receivables:"",OtherParty:"",ReceivablesMode:"",contractdate:"",projectClass:""},optionsprojectClass:[],optionsOtherParty:[],rules:{ReceivablesName:[{required:!0,message:"付款名称",trigger:"blur"}]}}},props:{map:{}},watch:{form:{handler:function(e,t){"不计发票"==e.invoicebo?this.boxvalue=!1:this.boxvalue=!0,"不分期"==e.Receivableslist?this.boxvalue1=!0:this.boxvalue1=!1},deep:!0},formModify:{handler:function(e,t){"不计发票"==e.invoicebo?this.boxvalue=!1:this.boxvalue=!0,"不分期"==e.Receivableslist?this.boxvalue1=!0:this.boxvalue1=!1},deep:!0}},mounted:function(){this.getdata(),this.getFormData("SupplierList"),this.getFormDataClass("expenditureClass"),this.getFormDataPojname()},methods:{submitFormModify:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.updatpostData()})},updatpostData:function(){var e=this;return Number(this.formModify.SupplierName)<999||(this.formModify.SupplierName=this.formbf.SupplierName),Number(this.formModify.projectClass)<999||(this.formModify.projectClass=this.formbf.projectClass),this.jsondata.updatpostData("expenditure",this.formModify).then(function(t){"OK"===t.data&&(e.dialogAddVisible=!1,e.getdata())}).catch(function(e){console.log(e)}),!1},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.postData()})},resetForm:function(e){this.$refs[e].resetFields()},postData:function(){var e=this;return this.jsondata.postData("expenditure",this.form).then(function(t){"OK"===t.data&&(e.dialogFormVisible=!1,e.getdata(),e.resetForm("form"))}).catch(function(e){console.log(e)}),!1},getdata:function(){var e=this;return this.hetongjiner=0,this.yingshou=0,this.zongshouru=0,this.weishou=0,this.weikaifapiao=0,this.biujifapiao=0,this.jsondata.getDataClass("expenditure",this.$route.params.id,"projectId").then(function(t){e.tableData=t.data,e.jsondata.getData("expenditureData").then(function(t){e.formTransactionList=t.data;for(var a=0;a<e.tableData.length;a++){if("不分期"==e.tableData[a].Receivableslist);else{e.tableData[a].Receivables=0,e.tableData[a].invoice=0,e.tableData[a].weikaifapiao=0,e.tableData[a].Receivablesend=0;for(var o=0;o<e.formTransactionList.length;o++)e.tableData[a].id==e.formTransactionList[o].projectId&&("不计发票"==e.formTransactionList[o].invoicebo?e.biujifapiao+=Number(e.formTransactionList[o].Receivables):e.tableData[a].invoice+=Number(e.formTransactionList[o].invoice),e.tableData[a].Receivables+=Number(e.formTransactionList[o].Receivables))}e.tableData[a].weikaifapiao=e.jsondata.currency(Number(e.tableData[a].Receivables)-Number(e.tableData[a].invoice),"￥",2),e.tableData[a].invoice=e.jsondata.currency(e.tableData[a].invoice,"￥",2),"不计发票"==e.tableData[a].invoicebo&&(e.biujifapiao+=Number(e.tableData[a].Receivables),e.tableData[a].invoice=e.tableData[a].invoicebo,e.tableData[a].weikaifapiao=e.tableData[a].invoicebo),e.tableData[a].Receivablesend=e.jsondata.currency(e.tableData[a].number-e.tableData[a].Receivables,"￥",2),e.tableData[a].number=e.jsondata.currency(e.tableData[a].number,"￥",2),e.tableData[a].Receivables=e.jsondata.currency(e.tableData[a].Receivables,"￥",2)}}).catch(function(e){console.log(e)}),e.jsondata.getData("SupplierList").then(function(t){e.tableData=e.jsondata.fordata(t.data,e.tableData,"SupplierName","SupplierName")}).catch(function(e){console.log(e)}),e.jsondata.getData("expenditureclass").then(function(t){e.tableData=e.jsondata.fordata(t.data,e.tableData,"expenditureClass","projectClass")}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),!1},deletepost:function(){var e=this;this.jsondata.deletepost("expenditure",this.formModify.id).then(function(t){"OK"===t.data&&(e.dialogAddVisible=!1,e.getdata())}).catch(function(e){console.log(e)})},handleClick:function(e){this.$router.push("/expenditure/"+e.id)},handle:function(e,t,a){var o=this;return this.dialogAddVisible=!0,this.jsondata.getDataId("expenditure",e.id).then(function(t){o.formModify=t.data[0],o.formModify.SupplierName=e.SupplierName,o.formModify.projectClass=e.projectClass}).catch(function(e){console.log(e)}),this.jsondata.getDataId("expenditure",e.id).then(function(e){o.formbf=e.data[0]}).catch(function(e){console.log(e)}),!1},getFormData:function(e){var t=this;this.jsondata.getData(e).then(function(e){t.optionsOtherParty=e.data}).catch(function(e){console.log(e)})},getFormDataClass:function(e){var t=this;this.jsondata.getData(e).then(function(e){t.optionsprojectClass=e.data}).catch(function(e){console.log(e)})},getFormDataPojname:function(){var e=this;this.jsondata.getDataId("projectList",this.$route.params.id).then(function(t){e.projectName=t.data[0].projectName}).catch(function(e){console.log(e)})},goToHome:function(){this.$router.push("/ProjectDetails/"+this.$route.params.id)}}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",{staticStyle:{color:"#333"}},[a("span",{staticStyle:{cursor:"pointer",color:"#409EFF"},on:{click:e.goToHome}},[e._v(e._s(this.projectName))]),e._v(" > 支出列表\n    "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加支出")])],1),e._v(" "),a("el-dialog",{attrs:{title:"添加支出",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"付款名称",prop:"ReceivablesName"}},[a("el-input",{model:{value:e.form.ReceivablesName,callback:function(t){e.$set(e.form,"ReceivablesName",t)},expression:"form.ReceivablesName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应付金额",prop:"number"}},[a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"签约日期",prop:"contractdate"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.contractdate,callback:function(t){e.$set(e.form,"contractdate",t)},expression:"form.contractdate"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"有无合同",prop:"contract"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.contract,callback:function(t){e.$set(e.form,"contract",t)},expression:"form.contract"}},[a("el-option",{attrs:{label:"有",value:"有"}}),e._v(" "),a("el-option",{attrs:{label:"无",value:"无"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"分期",prop:"Receivableslist"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.Receivableslist,callback:function(t){e.$set(e.form,"Receivableslist",t)},expression:"form.Receivableslist"}},[a("el-option",{attrs:{label:"1期",value:"1期"}}),e._v(" "),a("el-option",{attrs:{label:"2期",value:"2期"}}),e._v(" "),a("el-option",{attrs:{label:"3期",value:"3期"}}),e._v(" "),a("el-option",{attrs:{label:"4期",value:"4期"}}),e._v(" "),a("el-option",{attrs:{label:"5期",value:"5期"}}),e._v(" "),a("el-option",{attrs:{label:"不分期",value:"不分期"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"付款方式",prop:"ReceivablesMode"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.ReceivablesMode,callback:function(t){e.$set(e.form,"ReceivablesMode",t)},expression:"form.ReceivablesMode"}},[a("el-option",{attrs:{label:"现金",value:"现金"}}),e._v(" "),a("el-option",{attrs:{label:"银行",value:"银行"}})],1)],1),e._v(" "),e.boxvalue1?a("el-form-item",{attrs:{label:"付款金额",prop:"Receivables"}},[a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.daozhangdate,callback:function(t){e.$set(e.form,"daozhangdate",t)},expression:"form.daozhangdate"}})],1),e._v(" "),a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.form.Receivables,callback:function(t){e.$set(e.form,"Receivables",t)},expression:"form.Receivables"}})],1):e._e(),e._v(" "),e.boxvalue1?a("el-form-item",{attrs:{label:"收到发票",prop:"invoice"}},[e.boxvalue?a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.kaifapiaodate,callback:function(t){e.$set(e.form,"kaifapiaodate",t)},expression:"form.kaifapiaodate"}})],1):e._e(),e._v(" "),e.boxvalue?a("el-input",{staticStyle:{width:"25%"},attrs:{type:"number"},model:{value:e.form.invoice,callback:function(t){e.$set(e.form,"invoice",t)},expression:"form.invoice"}}):e._e(),e._v(" "),a("el-select",{staticStyle:{width:"20%"},attrs:{placeholder:"请选择"},model:{value:e.form.invoicebo,callback:function(t){e.$set(e.form,"invoicebo",t)},expression:"form.invoicebo"}},[a("el-option",{attrs:{label:"有",value:"有"}}),e._v(" "),a("el-option",{attrs:{label:"不计发票",value:"不计发票"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"收款方",filterable:"",prop:"SupplierName"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.SupplierName,callback:function(t){e.$set(e.form,"SupplierName",t)},expression:"form.SupplierName"}},e._l(e.optionsOtherParty,function(e){return a("el-option",{key:e.SupplierName,attrs:{label:e.SupplierName,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"付款类别",prop:"projectClass"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.form.projectClass,callback:function(t){e.$set(e.form,"projectClass",t)},expression:"form.projectClass"}},e._l(e.optionsprojectClass,function(e){return a("el-option",{key:e.expenditureClass,attrs:{label:e.expenditureClass,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"Remarks"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.Remarks,callback:function(t){e.$set(e.form,"Remarks",t)},expression:"form.Remarks"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确定添加")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"支出内容",visible:e.dialogAddVisible},on:{"update:visible":function(t){e.dialogAddVisible=t}}},[a("el-form",{ref:"formModify",staticClass:"demo-ruleForm",attrs:{model:e.formModify,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"付款名称",prop:"ReceivablesName"}},[a("el-input",{model:{value:e.formModify.ReceivablesName,callback:function(t){e.$set(e.formModify,"ReceivablesName",t)},expression:"formModify.ReceivablesName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应付金额",prop:"number"}},[a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.formModify.number,callback:function(t){e.$set(e.formModify,"number",t)},expression:"formModify.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"签约日期",prop:"contractdate"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.formModify.contractdate,callback:function(t){e.$set(e.formModify,"contractdate",t)},expression:"formModify.contractdate"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"付款方式",prop:"ReceivablesMode"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.ReceivablesMode,callback:function(t){e.$set(e.formModify,"ReceivablesMode",t)},expression:"formModify.ReceivablesMode"}},[a("el-option",{attrs:{label:"现金",value:"现金"}}),e._v(" "),a("el-option",{attrs:{label:"银行",value:"银行"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"有无合同",prop:"contract"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.contract,callback:function(t){e.$set(e.formModify,"contract",t)},expression:"formModify.contract"}},[a("el-option",{attrs:{label:"有",value:"有"}}),e._v(" "),a("el-option",{attrs:{label:"无",value:"无"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"分期",prop:"Receivableslist"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.Receivableslist,callback:function(t){e.$set(e.formModify,"Receivableslist",t)},expression:"formModify.Receivableslist"}},[a("el-option",{attrs:{label:"1期",value:"1期"}}),e._v(" "),a("el-option",{attrs:{label:"2期",value:"2期"}}),e._v(" "),a("el-option",{attrs:{label:"3期",value:"3期"}}),e._v(" "),a("el-option",{attrs:{label:"4期",value:"4期"}}),e._v(" "),a("el-option",{attrs:{label:"5期",value:"5期"}}),e._v(" "),a("el-option",{attrs:{label:"不分期",value:"不分期"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"付款方式",prop:"ReceivablesMode"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.ReceivablesMode,callback:function(t){e.$set(e.formModify,"ReceivablesMode",t)},expression:"formModify.ReceivablesMode"}},[a("el-option",{attrs:{label:"现金",value:"现金"}}),e._v(" "),a("el-option",{attrs:{label:"银行",value:"银行"}})],1)],1),e._v(" "),e.boxvalue1?a("el-form-item",{attrs:{label:"付款金额",prop:"Receivables"}},[a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.formModify.daozhangdate,callback:function(t){e.$set(e.formModify,"daozhangdate",t)},expression:"formModify.daozhangdate"}})],1),e._v(" "),a("el-input",{staticStyle:{width:"46%"},attrs:{type:"number"},model:{value:e.formModify.Receivables,callback:function(t){e.$set(e.formModify,"Receivables",t)},expression:"formModify.Receivables"}})],1):e._e(),e._v(" "),e.boxvalue1?a("el-form-item",{attrs:{label:"收到发票",prop:"invoice"}},[e.boxvalue?a("el-col",{staticStyle:{"margin-right":"10px"},attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.formModify.kaifapiaodate,callback:function(t){e.$set(e.formModify,"kaifapiaodate",t)},expression:"formModify.kaifapiaodate"}})],1):e._e(),e._v(" "),e.boxvalue?a("el-input",{staticStyle:{width:"25%"},attrs:{type:"number"},model:{value:e.formModify.invoice,callback:function(t){e.$set(e.formModify,"invoice",t)},expression:"formModify.invoice"}}):e._e(),e._v(" "),a("el-select",{staticStyle:{width:"20%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.invoicebo,callback:function(t){e.$set(e.formModify,"invoicebo",t)},expression:"formModify.invoicebo"}},[a("el-option",{attrs:{label:"有",value:"有"}}),e._v(" "),a("el-option",{attrs:{label:"不计发票",value:"不计发票"}})],1)],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"收款方",prop:"SupplierName"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.formModify.SupplierName,callback:function(t){e.$set(e.formModify,"SupplierName",t)},expression:"formModify.SupplierName"}},e._l(e.optionsOtherParty,function(e){return a("el-option",{key:e.SupplierName,attrs:{label:e.SupplierName,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"付款类别",prop:"projectClass"}},[a("el-select",{staticStyle:{width:"46%"},attrs:{placeholder:"请选择"},model:{value:e.formModify.projectClass,callback:function(t){e.$set(e.formModify,"projectClass",t)},expression:"formModify.projectClass"}},e._l(e.optionsprojectClass,function(e){return a("el-option",{key:e.expenditureClass,attrs:{label:e.expenditureClass,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"Remarks"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.formModify.Remarks,callback:function(t){e.$set(e.formModify,"Remarks",t)},expression:"formModify.Remarks"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFormModify("formModify")}}},[e._v("更新")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogAddVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticStyle:{float:"right"},on:{click:e.deletepost}},[e._v("删除收款")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","summary-method":e.jsondata.getSummaries,"show-summary":"",height:"90%"}},[a("el-table-column",{attrs:{prop:"SupplierName",label:"收款名称",width:"300",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReceivablesName",label:"应付内容",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"应支付金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractdate",label:"签约时间",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"已支付金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivablesend",label:"未支付金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"invoice",label:"收到发票",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"weikaifapiao",label:"已付未收票",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectClass",label:"支出类别",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("分期付款")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handle(t.row)}}},[e._v("编辑")])]}}])})],1)],1)},staticRenderFns:[]},q=a("VU/8")(P,K,!1,null,null,null).exports,B={data:function(){return{biujifapiao:"",weikaifapiao:"",thisdata:{},dataList:[],contentsint:"",contentsintp:"",Customerlist:[],tableData:[],optionsproject:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{projectName:"",projectContent:"",CustomerName:"",ContractAmount:"",ContractDate:"",ExpenditureBudget:""},fromexpenditureData:[],fromprojectList:[],fromexpenditure:[],fromsupplierlist:[],formReceivables:[]}},props:{map:{}},watch:{},mounted:function(){this.getdata()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.postData()})},resetForm:function(e){this.$refs[e].resetFields()},onSubmit:function(){console.log(this.form)},postData:function(){var e=this;return this.jsondata.postData("projectList",this.form).then(function(t){"OK"===t.statusText&&(e.getdata(),e.dialogFormVisible=!1)}).catch(function(e){console.log(e)}),!1},getdata:function(){var e=this;return this.biujifapiao=0,this.weikaifapiao=0,this.jsondata.getData("expenditureData").then(function(t){e.fromexpenditureData=t.data,e.jsondata.getDataClass("projectList","0","complete").then(function(t){e.fromprojectList=t.data,e.jsondata.getData("expenditure").then(function(t){e.jsondata.getDataClass("supplierlist","1","SupplierClass").then(function(a){e.jsondata.getData("expenditureclass").then(function(o){for(var i=0;i<e.fromprojectList.length;i++)for(var l=0;l<t.data.length;l++)if(e.fromprojectList[i].id==t.data[l].projectId)for(var r=0;r<a.data.length;r++)t.data[l].SupplierName==a.data[r].id&&1==a.data[r].SupplierClass&&e.fromexpenditure.push(t.data[l]);for(var n=0;n<e.fromexpenditure.length;n++){e.fromexpenditure[n].kaifapiao=0,e.fromexpenditure[n].biujifapiao=0;for(var s=0;s<o.data.length;s++)o.data[s].id==e.fromexpenditure[n].projectClass&&(e.fromexpenditure[n].projectClass=o.data[s].expenditureClass);for(var c=0;c<e.fromexpenditureData.length;c++)e.fromexpenditure[n].id==e.fromexpenditureData[c].projectId&&("不计发票"==e.fromexpenditureData[c].invoicebo?e.fromexpenditure[n].biujifapiao+=Number(e.fromexpenditureData[c].Receivables):e.fromexpenditure[n].kaifapiao+=Number(e.fromexpenditureData[c].invoice),"不分期"==e.fromexpenditure[n].Receivableslist||(e.fromexpenditure[n].Receivables=Number(e.fromexpenditure[n].Receivables)+Number(e.fromexpenditureData[c].Receivables)));"不计发票"==e.fromexpenditure[n].invoicebo&&(e.fromexpenditure[n].biujifapiao+=Number(e.fromexpenditure[n].Receivables)),e.fromexpenditure[n].Receivablesend=Number(e.fromexpenditure[n].number)-Number(e.fromexpenditure[n].Receivables)}e.fromsupplierlist=a.data;for(var u=0;u<e.fromsupplierlist.length;u++){e.fromsupplierlist[u].invoice=0,e.fromsupplierlist[u].number=0,e.fromsupplierlist[u].Receivables=0,e.fromsupplierlist[u].kaifapiao=0,e.fromsupplierlist[u].Receivablesend=0,e.fromsupplierlist[u].biujifapiao=0;for(var m=0;m<e.fromexpenditure.length;m++)e.fromexpenditure[m].SupplierName==e.fromsupplierlist[u].id&&(e.fromsupplierlist[u].number+=Number(e.fromexpenditure[m].number),e.fromsupplierlist[u].Receivables+=Number(e.fromexpenditure[m].Receivables),e.fromsupplierlist[u].kaifapiao+=Number(e.fromexpenditure[m].kaifapiao),e.fromsupplierlist[u].Receivablesend+=Number(e.fromexpenditure[m].Receivablesend));e.fromsupplierlist[u].weishoufapiao=e.jsondata.currency(e.fromsupplierlist[u].Receivables-e.fromsupplierlist[u].kaifapiao,"￥",2),e.fromsupplierlist[u].number=e.jsondata.currency(e.fromsupplierlist[u].number,"￥",2),e.fromsupplierlist[u].Receivables=e.jsondata.currency(e.fromsupplierlist[u].Receivables,"￥",2),e.fromsupplierlist[u].Receivablesend=e.jsondata.currency(e.fromsupplierlist[u].Receivablesend,"￥",2),e.fromsupplierlist[u].kaifapiao=e.jsondata.currency(e.fromsupplierlist[u].kaifapiao,"￥",2)}}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),!1},handle:function(e,t,a){this.$router.push("/SupplierDatalist/"+e.id),console.log(e.id)}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",[e._v("\n    供应商例表\n  ")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fromsupplierlist,border:"","summary-method":e.jsondata.getSummaries,"show-summary":"",height:"90%"},on:{"row-click":e.handle}},[a("el-table-column",{attrs:{prop:"SupplierName",label:"供应商名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"应付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"已付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivablesend",label:"未付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"kaifapiao",label:"已收发票"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weishoufapiao",label:"已付款未收发票"}})],1)],1)},staticRenderFns:[]},H=a("VU/8")(B,U,!1,null,null,null).exports,J={data:function(){return{contentsint:"",contentsintp:"",Customerlist:[],tableData:[],optionsproject:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{projectName:"",projectContent:"",CustomerName:"",ContractAmount:"",ContractDate:"",ExpenditureBudget:""},formexpenditureData:[],formReceivables:[],rules:{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],ContractAmount:[{required:!0,message:"请输入合同金额"},{type:"number",message:"金额必需为数额"}],ContractDate:[{required:!0,message:"请选择签约日期",trigger:"blur"}]}}},props:{map:{}},watch:{},mounted:function(){this.getdata(),this.getFormData("Customerlist")},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.postData()})},resetForm:function(e){this.$refs[e].resetFields()},onSubmit:function(){console.log(this.form)},postData:function(){var e=this;return this.jsondata.postData("projectList",this.form).then(function(t){"OK"===t.statusText&&(e.getdata(),e.dialogFormVisible=!1)}).catch(function(e){console.log(e)}),!1},getdata:function(){var e=this;return this.jsondata.getData("expenditureData").then(function(t){e.formexpenditureData=t.data}).catch(function(e){console.log(e)}),this.jsondata.getDataClass("projectList","0","complete").then(function(t){e.tableData=t.data;for(var a=0;a<e.tableData.length;a++)e.tableData[a].ContractDate=t.data[0].ContractDate.substr(0,10),e.tableData[a].ContractAmount=e.jsondata.currency(Number(e.tableData[a].ContractAmount),"￥",2),e.tableData[a].ExpenditureBudget=e.jsondata.currency(e.tableData[a].ExpenditureBudget,"￥",2),e.tableData[a].Receivables=0;e.getdataReceivables()}).catch(function(e){console.log(e)}),!1},handle:function(e,t,a){this.$router.push("/ProjectDetails/"+e.id),console.log(e.id)},getFormData:function(e){var t=this;this.jsondata.getData(e).then(function(e){t.optionsproject=e.data}).catch(function(e){console.log(e)})},getdataReceivables:function(){var e=this;return this.jsondata.getData("Receivables").then(function(t){e.jsondata.getData("RevenueContract").then(function(a){e.jsondata.getData("expenditure").then(function(o){for(var i=0;i<e.tableData.length;i++){e.tableData[i].Receivables=0,e.tableData[i].expenditure=0;for(var l=0;l<a.data.length;l++)for(var r=0;r<t.data.length;r++)a.data[l].id===t.data[r].projectId&&Number(a.data[l].projectId)===Number(e.tableData[i].id)&&(e.tableData[i].Receivables+=Number(t.data[r].Receivables));for(var n=0;n<o.data.length;n++){o.data[n].expenditure=0;for(var s=0;s<e.formexpenditureData.length;s++)o.data[n].id===e.formexpenditureData[s].projectId&&Number(o.data[n].projectId)===Number(e.tableData[i].id)&&(o.data[n].expenditure+=Number(e.formexpenditureData[s].Receivables));"不分期"===o.data[n].Receivableslist&&Number(o.data[n].projectId)===Number(e.tableData[i].id)?e.tableData[i].expenditure+=Number(o.data[n].Receivables):e.tableData[i].expenditure+=o.data[n].expenditure}e.tableData[i].profit=e.jsondata.currency(Number(e.tableData[i].Receivables)-Number(e.tableData[i].expenditure),"￥",2),e.tableData[i].expenditure=e.jsondata.currency(e.tableData[i].expenditure,"￥",2),e.tableData[i].Receivables=e.jsondata.currency(e.tableData[i].Receivables,"￥",2)}}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),!1}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",[e._v("\n    利润报表\n  ")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","summary-method":e.jsondata.getSummaries,"show-summary":""},on:{"row-click":e.handle}},[a("el-table-column",{attrs:{prop:"ContractDate",label:"签约时间",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ContractAmount",label:"项目金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"已收金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ExpenditureBudget",label:"应付金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"expenditure",label:"已付金额",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"profit",label:"利润",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectContent",label:"项目说明",sortable:""}})],1)],1)},staticRenderFns:[]},W=a("VU/8")(J,G,!1,null,null,null).exports,Q={data:function(){return{biujifapiao:"",weikaifapiao:"",thisdata:{},dataList:[],contentsint:"",contentsintp:"",Customerlist:[],tableData:[],optionsproject:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{projectName:"",projectContent:"",CustomerName:"",ContractAmount:"",ContractDate:"",ExpenditureBudget:""},fromexpenditureData:[],fromprojectList:[],fromexpenditure:[],fromsupplierlist:[],formReceivables:[]}},props:{map:{}},watch:{},mounted:function(){this.getdata()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.postData()})},resetForm:function(e){this.$refs[e].resetFields()},onSubmit:function(){console.log(this.form)},postData:function(){var e=this;return this.jsondata.postData("projectList",this.form).then(function(t){"OK"===t.statusText&&(e.getdata(),e.dialogFormVisible=!1)}).catch(function(e){console.log(e)}),!1},getdata:function(){var e=this;return this.biujifapiao=0,this.weikaifapiao=0,this.jsondata.getData("expenditureData").then(function(t){e.fromexpenditureData=t.data,e.jsondata.getDataClass("projectList","0","complete").then(function(t){e.fromprojectList=t.data,e.jsondata.getData("expenditure").then(function(t){e.jsondata.getDataClass("supplierlist","3","SupplierClass").then(function(a){e.jsondata.getData("expenditureclass").then(function(o){for(var i=0;i<e.fromprojectList.length;i++)for(var l=0;l<t.data.length;l++)if(e.fromprojectList[i].id==t.data[l].projectId)for(var r=0;r<a.data.length;r++)t.data[l].SupplierName==a.data[r].id&&1==a.data[r].SupplierClass&&e.fromexpenditure.push(t.data[l]);for(var n=0;n<e.fromexpenditure.length;n++){e.fromexpenditure[n].kaifapiao=0,e.fromexpenditure[n].biujifapiao=0;for(var s=0;s<o.data.length;s++)o.data[s].id==e.fromexpenditure[n].projectClass&&(e.fromexpenditure[n].projectClass=o.data[s].expenditureClass);for(var c=0;c<e.fromexpenditureData.length;c++)e.fromexpenditure[n].id==e.fromexpenditureData[c].projectId&&("不计发票"==e.fromexpenditureData[c].invoicebo?e.fromexpenditure[n].biujifapiao+=Number(e.fromexpenditureData[c].Receivables):e.fromexpenditure[n].kaifapiao+=Number(e.fromexpenditureData[c].invoice),"不分期"==e.fromexpenditure[n].Receivableslist||(e.fromexpenditure[n].Receivables=Number(e.fromexpenditure[n].Receivables)+Number(e.fromexpenditureData[c].Receivables)));"不计发票"==e.fromexpenditure[n].invoicebo&&(e.fromexpenditure[n].biujifapiao+=Number(e.fromexpenditure[n].Receivables)),e.fromexpenditure[n].Receivablesend=Number(e.fromexpenditure[n].number)-Number(e.fromexpenditure[n].Receivables)}e.fromsupplierlist=a.data;for(var u=0;u<e.fromsupplierlist.length;u++){e.fromsupplierlist[u].invoice=0,e.fromsupplierlist[u].number=0,e.fromsupplierlist[u].Receivables=0,e.fromsupplierlist[u].kaifapiao=0,e.fromsupplierlist[u].Receivablesend=0,e.fromsupplierlist[u].biujifapiao=0;for(var m=0;m<e.fromexpenditure.length;m++)e.fromexpenditure[m].SupplierName==e.fromsupplierlist[u].id&&(e.fromsupplierlist[u].number+=Number(e.fromexpenditure[m].number),e.fromsupplierlist[u].Receivables+=Number(e.fromexpenditure[m].Receivables),e.fromsupplierlist[u].kaifapiao+=Number(e.fromexpenditure[m].kaifapiao),e.fromsupplierlist[u].Receivablesend+=Number(e.fromexpenditure[m].Receivablesend));e.fromsupplierlist[u].weishoufapiao=e.jsondata.currency(e.fromsupplierlist[u].Receivables-e.fromsupplierlist[u].kaifapiao,"￥",2),e.fromsupplierlist[u].number=e.jsondata.currency(e.fromsupplierlist[u].number,"￥",2),e.fromsupplierlist[u].Receivables=e.jsondata.currency(e.fromsupplierlist[u].Receivables,"￥",2),e.fromsupplierlist[u].Receivablesend=e.jsondata.currency(e.fromsupplierlist[u].Receivablesend,"￥",2),e.fromsupplierlist[u].kaifapiao=e.jsondata.currency(e.fromsupplierlist[u].kaifapiao,"￥",2)}}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),!1},handle:function(e,t,a){this.$router.push("/ProjectDetails/"+e.id),console.log(e.id)}}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",[e._v("\n    供应商例表\n  ")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fromsupplierlist,border:""},on:{"row-click":e.handle}},[a("el-table-column",{attrs:{prop:"SupplierName",label:"供应商名称",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"应付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"已付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivablesend",label:"未付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"kaifapiao",label:"已收发票"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weishoufapiao",label:"已付款未收发票"}})],1)],1)},staticRenderFns:[]},Y=a("VU/8")(Q,X,!1,null,null,null).exports,Z={data:function(){return{Suppliertitle:"",biujifapiao:"",weikaifapiao:"",thisdata:{},dataList:[],dataList1:[],dataList2:[],contentsint:"",contentsintp:"",Customerlist:[],tableData:[],optionsproject:[],dialogTableVisible:!1,dialogFormVisible:!1,form:{projectName:"",projectContent:"",CustomerName:"",ContractAmount:"",ContractDate:"",ExpenditureBudget:""},fromexpenditureData:[],fromprojectList:[],fromexpenditure:[],fromsupplierlist:[],formReceivables:[]}},props:{map:{}},watch:{},mounted:function(){this.getdata()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.postData()})},resetForm:function(e){this.$refs[e].resetFields()},onSubmit:function(){console.log(this.form)},postData:function(){var e=this;return this.jsondata.postData("projectList",this.form).then(function(t){"OK"===t.statusText&&(e.getdata(),e.dialogFormVisible=!1)}).catch(function(e){console.log(e)}),!1},getdata:function(){var e=this;return this.biujifapiao=0,this.weikaifapiao=0,this.jsondata.getData("expenditureData").then(function(t){e.jsondata.getDataClass("projectList","0","complete").then(function(a){e.jsondata.getData("expenditure").then(function(o){e.jsondata.getDataClass("supplierlist",e.$route.params.id,"id").then(function(i){e.jsondata.getData("expenditureclass").then(function(l){for(var r=0;r<a.data.length;r++)for(var n=0;n<o.data.length;n++)for(var s=0;s<t.data.length;s++)a.data[r].id===o.data[n].projectId&&Number(t.data[s].projectId)===Number(o.data[n].id)&&o.data[n].SupplierName===e.$route.params.id&&(t.data[s].projectdata=o.data[n].contractdate,t.data[s].projectlist=a.data[r].projectName,t.data[s].projectname=o.data[n].ReceivablesName,t.data[s].weikaifapiao=Number(t.data[s].Receivables)-Number(t.data[s].invoice),""!=o.data[n].number?(t.data[s].projectnumber=Number(o.data[n].number),o.data[n].number=""):t.data[s].projectnumber=0,"不计发票"===t.data[s].invoicebo?t.data[s].biujifapiao=Number(t.data[s].Receivables):t.data[s].biujifapiao=0,e.tableData.push(t.data[s]));for(var c=0;c<e.tableData.length;c++){if(""==e.tableData[c].number)e.tableData[c].Receivablesend="";else{e.tableData[c].Receivablesend=Number(e.tableData[c].number),e.tableData[c].weikaifapiao=0;for(var u=0;u<e.tableData.length;u++)e.tableData[c].Receivableslist==e.tableData[u].Receivableslist&&e.tableData[c].projectname==e.tableData[u].projectname&&(e.tableData[c].Receivablesend-=Number(e.tableData[u].Receivables),e.tableData[c].weikaifapiao+=Number(e.tableData[u].Receivables)-Number(e.tableData[u].invoice))}e.tableData[c].weikaifapiao=e.jsondata.currency(e.tableData[c].weikaifapiao,"￥",2),e.tableData[c].Receivablesend=e.jsondata.currency(e.tableData[c].Receivablesend,"￥",2),e.tableData[c].Receivables=e.jsondata.currency(e.tableData[c].Receivables,"￥",2),e.tableData[c].number=e.jsondata.currency(e.tableData[c].number,"￥",2),e.tableData[c].invoice=e.jsondata.currency(e.tableData[c].invoice,"￥",2),e.tableData[c].projectnumber=e.jsondata.currency(e.tableData[c].projectnumber,"￥",2),e.tableData[c].biujifapiao=e.jsondata.currency(e.tableData[c].biujifapiao,"￥",2)}e.tableData=e.tableData.sort(function(e,t){return(e.Receivableslist+"").localeCompare(t.Receivableslist+"")}),e.tableData=e.tableData.sort(function(e,t){return(e.projectname+"").localeCompare(t.projectname+"")}),e.tableData=e.tableData.sort(function(e,t){return(e.projectlist+"").localeCompare(t.projectlist+"")}),e.Suppliertitle=i.data[0].SupplierName,e.dataList=e.jsondata.getSpanArr(e.tableData,"projectlist"),e.dataList1=e.jsondata.getSpanArr(e.tableData,"projectname"),e.dataList2=e.jsondata.getSpanArr(e.tableData,"Receivableslist")}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)}),!1},handle:function(e,t,a){this.$router.push("/ProjectDetails/"+e.id)},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,a=e.columnIndex;if(0===a){var o=this.dataList[t];return{rowspan:o,colspan:o>0?1:0}}if(1===a||2===a||3===a){var i=this.dataList1[t];return{rowspan:i,colspan:i>0?1:0}}if(6===a||4===a||5===a||9===a||12===a){var l=this.dataList2[t];return{rowspan:l,colspan:l>0?1:0}}}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"text-align":"left","line-height":"1.8em"}},[a("h3",[e._v("\n    "+e._s(this.Suppliertitle)+"\n  ")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","span-method":e.objectSpanMethod,"summary-method":e.jsondata.getSummaries,"show-summary":""}},[a("el-table-column",{attrs:{prop:"projectlist",label:"所属项目"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectname",label:"应付内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectdata",label:"签约日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"projectnumber",label:"应付总额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivableslist",label:"应付分期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ReceivablesData",label:"应付时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"应付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivables",label:"已付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"daozhangdate",label:"付款时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"Receivablesend",label:"未付金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"invoice",label:"已收发票"}}),e._v(" "),a("el-table-column",{attrs:{prop:"kaifapiaodate",label:"已票时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"weikaifapiao",label:"已付款未收票"}}),e._v(" "),a("el-table-column",{attrs:{prop:"biujifapiao",label:"不计发票"}})],1)],1)},staticRenderFns:[]},te=a("VU/8")(Z,ee,!1,null,null,null).exports;o.default.use(s.a);var ae=new s.a({routes:[{path:"/ProjectDetails/:id",name:"ProjectDetails",components:{Nav:f,content:y}},{path:"/expenditure/:id",name:"expenditure",components:{Nav:f,content:k}},{path:"/RevenueContract/:id",name:"RevenueContract",components:{Nav:f,content:O}},{path:"/SupplierDatalist/:id",name:"SupplierDatalist",components:{Nav:f,content:te}},{path:"/stafflist",name:"stafflist",components:{Nav:f,content:Y}},{path:"/expenditurelist",name:"expenditurelist",components:{Nav:f,content:T}},{path:"/profitlist",name:"profitlist",components:{Nav:f,content:W}},{path:"/SupplierData",name:"SupplierData",components:{Nav:f,content:H}},{path:"/expenditureContract/:id",name:"expenditureContract",components:{Nav:f,content:q}},{path:"/index",name:"index",components:{Nav:f,content:m}},{path:"/Receivables/:id",name:"Receivables",components:{Nav:f,content:R}},{path:"/Receivableslist/",name:"Receivableslist",components:{Nav:f,content:z}},{path:"/SupplierList/",name:"SupplierList",components:{Nav:f,content:M}},{path:"/Customerlist/",name:"Customerlist",components:{Nav:f,content:$}}]}),oe=a("zL8q"),ie=a.n(oe),le=(a("tvR6"),a("mtWM")),re=a.n(le),ne={fordata:function(e,t,a,o){for(var i=0;i<e.length;i++)for(var l=0;l<t.length;l++)e[i].id==t[l][o]&&(t[l][o]=e[i][a]);return t},getSpanArr:function(e,t){this.spanArr=[];for(var a=0;a<e.length;a++)0===a?(this.spanArr.push(1),this.pos=0):e[a][t]===e[a-1][t]?(this.spanArr[this.pos]+=1,this.spanArr.push(0)):(this.spanArr.push(1),this.pos=a);return this.spanArr},getDataId:function(e,t){return re()({url:"http://localhost:3000/getpost/"+e+"/"+t,method:"GET",dataType:"JSON",headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getData:function(e){return re()({url:"http://localhost:3000/getposts/"+e,method:"GET",dataType:"JSON",headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getDataClass:function(e,t,a){return re()({url:"http://localhost:3000/getDataClass/"+e+"/"+t+"/"+a,method:"GET",dataType:"JSON",headers:{"Content-Type":"application/x-www-form-urlencoded"}})},postData:function(e,t){return re()({url:"http://localhost:3000/postdata/"+e,method:"POST",data:t,dataType:"JSON",headers:{"Content-Type":"application/x-www-form-urlencoded"}})},deletepost:function(e,t){return re()({url:"http://localhost:3000/deletepost/"+e+"/"+t,method:"GET",dataType:"JSON",headers:{"Content-Type":"application/x-www-form-urlencoded"}})},updatpostData:function(e,t){return re()({url:"http://localhost:3000/deletepost/"+e+"/"+t.id,method:"GET",dataType:"JSON",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){if("OK"===a.data)return re()({url:"http://localhost:3000/postdata/"+e,method:"POST",data:t,dataType:"JSON",headers:{"Content-Type":"application/x-www-form-urlencoded"}})})},currency:function(e,t,a){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",a=null!=a?a:2;var o=Math.abs(e).toFixed(a),i=a?o.slice(0,-1-a):o,l=i.length%3,r=l>0?i.slice(0,l)+(i.length>3?",":""):"",n=a?o.slice(-1-a):"";return(e<0?"-":"")+t+r+i.slice(l).replace(/(\d{3})(?=\d)/g,"$1,")+n},getSummaries:function(e){var t=e.columns,a=e.data,o=[];for(var i in t.forEach(function(e,t){if(0!==t){for(var i=a.map(function(t){return t[e.property]}),l=0;l<i.length;l++)""!=i[l]&&void 0!=i[l]?(i[l]=Number(i[l].replace(/,|￥/g,"")),isNaN(i[l])&&(i[l]=0)):i[l]=Number(i[l]);i.every(function(e){return isNaN(e)})?o[t]="N/A":o[t]=i.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0)}else o[t]="合计"}),o)o[i]>0&&(o[i]=this.jsondata.currency(o[i],"￥",2)),0===o[i]&&(o[i]="N/A");return o}};o.default.config.productionTip=!1,o.default.use(ie.a),o.default.prototype.jsondata=ne,new o.default({el:"#app",router:ae,components:{App:n},template:"<App/>"})},bCTA:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.1e8a4d7665edd894a772.js.map